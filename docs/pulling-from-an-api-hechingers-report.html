<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Pulling from an API: Hechinger’s Report | An Introduction to Web Scraping in R</title>
  <meta name="description" content="Enter description." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Pulling from an API: Hechinger’s Report | An Introduction to Web Scraping in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Enter description." />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Pulling from an API: Hechinger’s Report | An Introduction to Web Scraping in R" />
  
  <meta name="twitter:description" content="Enter description." />
  

<meta name="author" content="Danny Klinenberg" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="can-i-scrape-from-this-site.html"/>
<link rel="next" href="web-scraping-ucsb-economics-contact-information.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Wrangling for Economists</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> output: bookdown::gitbook</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i><b>1.1</b> Organization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>2</b> Intro to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#basic-summary-statistics"><i class="fa fa-check"></i><b>2.1</b> Basic summary statistics</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise"><i class="fa fa-check"></i><b>2.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro-to-r.html"><a href="intro-to-r.html#basic-histogram"><i class="fa fa-check"></i><b>2.2</b> Basic histogram</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-1"><i class="fa fa-check"></i><b>2.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro-to-r.html"><a href="intro-to-r.html#creating-vectors"><i class="fa fa-check"></i><b>2.3</b> Creating Vectors</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-2"><i class="fa fa-check"></i><b>2.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro-to-r.html"><a href="intro-to-r.html#comparing-vectors"><i class="fa fa-check"></i><b>2.4</b> Comparing Vectors</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-3"><i class="fa fa-check"></i><b>2.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-to-r.html"><a href="intro-to-r.html#creating-a-tibble"><i class="fa fa-check"></i><b>2.5</b> Creating a tibble</a></li>
<li class="chapter" data-level="2.6" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-4"><i class="fa fa-check"></i><b>2.6</b> Exercise</a></li>
<li class="chapter" data-level="2.7" data-path="intro-to-r.html"><a href="intro-to-r.html#selected-solutions"><i class="fa fa-check"></i><b>2.7</b> Selected Solutions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-rproject.html"><a href="the-rproject.html"><i class="fa fa-check"></i><b>3</b> The <code>Rproject</code></a></li>
<li class="chapter" data-level="4" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>4</b> Git and Github</a>
<ul>
<li class="chapter" data-level="4.1" data-path="git-and-github.html"><a href="git-and-github.html#installing-git"><i class="fa fa-check"></i><b>4.1</b> Installing Git</a></li>
<li class="chapter" data-level="4.2" data-path="git-and-github.html"><a href="git-and-github.html#create-a-github-account"><i class="fa fa-check"></i><b>4.2</b> Create a Github account</a></li>
<li class="chapter" data-level="4.3" data-path="git-and-github.html"><a href="git-and-github.html#introduce-yourself-to-git"><i class="fa fa-check"></i><b>4.3</b> Introduce yourself to Git</a></li>
<li class="chapter" data-level="4.4" data-path="git-and-github.html"><a href="git-and-github.html#create-a-pat"><i class="fa fa-check"></i><b>4.4</b> Create a PAT</a></li>
<li class="chapter" data-level="4.5" data-path="git-and-github.html"><a href="git-and-github.html#the-workflow"><i class="fa fa-check"></i><b>4.5</b> The Workflow</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="git-and-github.html"><a href="git-and-github.html#definitions"><i class="fa fa-check"></i><b>4.5.1</b> Definitions</a></li>
<li class="chapter" data-level="4.5.2" data-path="git-and-github.html"><a href="git-and-github.html#the-workflow-1"><i class="fa fa-check"></i><b>4.5.2</b> The Workflow</a></li>
<li class="chapter" data-level="4.5.3" data-path="git-and-github.html"><a href="git-and-github.html#the-git-panel-of-rstudio"><i class="fa fa-check"></i><b>4.5.3</b> The Git panel of RStudio</a></li>
<li class="chapter" data-level="4.5.4" data-path="git-and-github.html"><a href="git-and-github.html#pulling"><i class="fa fa-check"></i><b>4.5.4</b> Pulling</a></li>
<li class="chapter" data-level="4.5.5" data-path="git-and-github.html"><a href="git-and-github.html#commiting"><i class="fa fa-check"></i><b>4.5.5</b> Commiting</a></li>
<li class="chapter" data-level="4.5.6" data-path="git-and-github.html"><a href="git-and-github.html#pushing"><i class="fa fa-check"></i><b>4.5.6</b> Pushing</a></li>
<li class="chapter" data-level="4.5.7" data-path="git-and-github.html"><a href="git-and-github.html#pulling-again"><i class="fa fa-check"></i><b>4.5.7</b> Pulling (again)</a></li>
<li class="chapter" data-level="4.5.8" data-path="git-and-github.html"><a href="git-and-github.html#the-main-commands-command-lineterminal"><i class="fa fa-check"></i><b>4.5.8</b> The Main Commands (Command Line/Terminal)</a></li>
<li class="chapter" data-level="4.5.9" data-path="git-and-github.html"><a href="git-and-github.html#exercise-5"><i class="fa fa-check"></i><b>4.5.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="git-and-github.html"><a href="git-and-github.html#branches"><i class="fa fa-check"></i><b>4.6</b> Branches</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="git-and-github.html"><a href="git-and-github.html#creating-a-branch"><i class="fa fa-check"></i><b>4.6.1</b> Creating a branch</a></li>
<li class="chapter" data-level="4.6.2" data-path="git-and-github.html"><a href="git-and-github.html#branches-when-working-independently"><i class="fa fa-check"></i><b>4.6.2</b> Branches when working independently</a></li>
<li class="chapter" data-level="4.6.3" data-path="git-and-github.html"><a href="git-and-github.html#branches-when-working-collaboratively"><i class="fa fa-check"></i><b>4.6.3</b> Branches when working collaboratively</a></li>
<li class="chapter" data-level="4.6.4" data-path="git-and-github.html"><a href="git-and-github.html#branches-with-the-terminal"><i class="fa fa-check"></i><b>4.6.4</b> Branches with the Terminal</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="git-and-github.html"><a href="git-and-github.html#gitignore"><i class="fa fa-check"></i><b>4.7</b> .gitignore</a></li>
<li class="chapter" data-level="4.8" data-path="git-and-github.html"><a href="git-and-github.html#reverting"><i class="fa fa-check"></i><b>4.8</b> Reverting</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="git-and-github.html"><a href="git-and-github.html#reverting-safelty"><i class="fa fa-check"></i><b>4.8.1</b> Reverting Safelty</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html"><i class="fa fa-check"></i><b>5</b> Cleaning Data I</a>
<ul>
<li class="chapter" data-level="5.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-pipe"><i class="fa fa-check"></i><b>5.1</b> The Pipe</a></li>
<li class="chapter" data-level="5.2" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-clean_names-function"><i class="fa fa-check"></i><b>5.2</b> The <code>clean_names</code> function</a></li>
<li class="chapter" data-level="5.3" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-select-function"><i class="fa fa-check"></i><b>5.3</b> The <code>select</code> function</a></li>
<li class="chapter" data-level="5.4" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-filter-function"><i class="fa fa-check"></i><b>5.4</b> The <code>filter</code> function</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-6"><i class="fa fa-check"></i><b>5.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-distinct-function"><i class="fa fa-check"></i><b>5.5</b> The <code>distinct</code> function</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-7"><i class="fa fa-check"></i><b>5.5.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-mutate-function."><i class="fa fa-check"></i><b>5.6</b> The <code>mutate</code> function.</a></li>
<li class="chapter" data-level="5.7" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-summarize-function"><i class="fa fa-check"></i><b>5.7</b> The <code>summarize</code> function</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-8"><i class="fa fa-check"></i><b>5.7.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-group_by-and-summarize-functions"><i class="fa fa-check"></i><b>5.8</b> The <code>group_by</code> and <code>summarize</code> functions</a></li>
<li class="chapter" data-level="5.9" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-9"><i class="fa fa-check"></i><b>5.9</b> Exercise</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-10"><i class="fa fa-check"></i><b>5.9.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#selected-solutions-1"><i class="fa fa-check"></i><b>5.10</b> Selected Solutions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html"><i class="fa fa-check"></i><b>6</b> Data Cleaning II</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#the-count-function"><i class="fa fa-check"></i><b>6.1</b> The <code>count</code> function</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-11"><i class="fa fa-check"></i><b>6.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#using-the-is.na-function"><i class="fa fa-check"></i><b>6.2</b> Using the <code>is.na</code> function</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-12"><i class="fa fa-check"></i><b>6.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#the-arrange-function"><i class="fa fa-check"></i><b>6.3</b> The <code>arrange</code> function</a></li>
<li class="chapter" data-level="6.4" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#the-filter-function-with-logicals"><i class="fa fa-check"></i><b>6.4</b> The <code>filter</code> function with logicals</a></li>
<li class="chapter" data-level="6.5" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-13"><i class="fa fa-check"></i><b>6.5</b> Exercise</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-14"><i class="fa fa-check"></i><b>6.5.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#selected-solutions-2"><i class="fa fa-check"></i><b>6.6</b> Selected Solutions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Graphics with ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.1</b> The grammar of graphics</a></li>
<li class="chapter" data-level="7.2" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#adding-options"><i class="fa fa-check"></i><b>7.2</b> Adding options</a></li>
<li class="chapter" data-level="7.3" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#adding-multiple-plots-together"><i class="fa fa-check"></i><b>7.3</b> Adding multiple plots together</a></li>
<li class="chapter" data-level="7.4" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#creating-legends"><i class="fa fa-check"></i><b>7.4</b> Creating legends</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#exercise-15"><i class="fa fa-check"></i><b>7.4.1</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="file-organization.html"><a href="file-organization.html"><i class="fa fa-check"></i><b>8</b> File Organization</a>
<ul>
<li class="chapter" data-level="8.1" data-path="file-organization.html"><a href="file-organization.html#organizing"><i class="fa fa-check"></i><b>8.1</b> Organizing</a></li>
<li class="chapter" data-level="8.2" data-path="file-organization.html"><a href="file-organization.html#rmarkdown"><i class="fa fa-check"></i><b>8.2</b> <code>Rmarkdown</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="file-organization.html"><a href="file-organization.html#the-anatomy-of-an-rmarkdown-file"><i class="fa fa-check"></i><b>8.2.1</b> The Anatomy of an <code>Rmarkdown</code> File</a></li>
<li class="chapter" data-level="8.2.2" data-path="file-organization.html"><a href="file-organization.html#the-body-of-the-rmarkdown"><i class="fa fa-check"></i><b>8.2.2</b> The Body of the <code>Rmarkdown</code></a></li>
<li class="chapter" data-level="8.2.3" data-path="file-organization.html"><a href="file-organization.html#childing"><i class="fa fa-check"></i><b>8.2.3</b> Childing</a></li>
<li class="chapter" data-level="8.2.4" data-path="file-organization.html"><a href="file-organization.html#bibliographies"><i class="fa fa-check"></i><b>8.2.4</b> Bibliographies</a></li>
<li class="chapter" data-level="8.2.5" data-path="file-organization.html"><a href="file-organization.html#a-final-note-on-rmarkdown-visual-markdown-editor"><i class="fa fa-check"></i><b>8.2.5</b> A Final Note on <code>Rmarkdown</code>: Visual Markdown Editor</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>9</b> Strings</a>
<ul>
<li class="chapter" data-level="9.1" data-path="strings.html"><a href="strings.html#regular-expressions"><i class="fa fa-check"></i><b>9.1</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="strings.html"><a href="strings.html#exercise-1-1"><i class="fa fa-check"></i><b>9.1.1</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="strings.html"><a href="strings.html#regular-expressions-continued"><i class="fa fa-check"></i><b>9.2</b> Regular Expressions Continued</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="strings.html"><a href="strings.html#exercise-2-1"><i class="fa fa-check"></i><b>9.2.1</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="strings.html"><a href="strings.html#using-extract"><i class="fa fa-check"></i><b>9.3</b> Using <code>extract</code></a></li>
<li class="chapter" data-level="9.4" data-path="strings.html"><a href="strings.html#using-separate"><i class="fa fa-check"></i><b>9.4</b> Using <code>separate</code></a></li>
<li class="chapter" data-level="9.5" data-path="strings.html"><a href="strings.html#the-gsub-function"><i class="fa fa-check"></i><b>9.5</b> The <code>gsub</code> function</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="strings.html"><a href="strings.html#exercise-3-1"><i class="fa fa-check"></i><b>9.5.1</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="strings.html"><a href="strings.html#solutions"><i class="fa fa-check"></i><b>9.6</b> Solutions</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="an-introduction-to-web-scraping-in-r.html"><a href="an-introduction-to-web-scraping-in-r.html"><i class="fa fa-check"></i><b>10</b> An Introduction to Web Scraping in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="an-introduction-to-web-scraping-in-r.html"><a href="an-introduction-to-web-scraping-in-r.html#what-is-web-scraping"><i class="fa fa-check"></i><b>10.1</b> What is Web Scraping?</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="can-i-scrape-from-this-site.html"><a href="can-i-scrape-from-this-site.html"><i class="fa fa-check"></i><b>11</b> Can I Scrape From This Site?</a></li>
<li class="chapter" data-level="12" data-path="pulling-from-an-api-hechingers-report.html"><a href="pulling-from-an-api-hechingers-report.html"><i class="fa fa-check"></i><b>12</b> Pulling from an API: Hechinger’s Report</a></li>
<li class="chapter" data-level="13" data-path="web-scraping-ucsb-economics-contact-information.html"><a href="web-scraping-ucsb-economics-contact-information.html"><i class="fa fa-check"></i><b>13</b> Web Scraping: UCSB Economics Contact Information</a></li>
<li class="chapter" data-level="14" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>14</b> Programming</a>
<ul>
<li class="chapter" data-level="14.1" data-path="programming.html"><a href="programming.html#functions"><i class="fa fa-check"></i><b>14.1</b> Functions</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="programming.html"><a href="programming.html#exercise-16"><i class="fa fa-check"></i><b>14.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="programming.html"><a href="programming.html#for-loops"><i class="fa fa-check"></i><b>14.2</b> For-loops</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="programming.html"><a href="programming.html#exercise-17"><i class="fa fa-check"></i><b>14.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="programming.html"><a href="programming.html#if-else"><i class="fa fa-check"></i><b>14.3</b> If-else</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="programming.html"><a href="programming.html#exercise-18"><i class="fa fa-check"></i><b>14.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="programming.html"><a href="programming.html#selected-solutions-3"><i class="fa fa-check"></i><b>14.4</b> Selected Solutions</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>15</b> Relational Data</a>
<ul>
<li class="chapter" data-level="15.1" data-path="relational-data.html"><a href="relational-data.html#finding-primary-keys"><i class="fa fa-check"></i><b>15.1</b> Finding Primary Keys</a></li>
<li class="chapter" data-level="15.2" data-path="relational-data.html"><a href="relational-data.html#finding-primary-keys-harder"><i class="fa fa-check"></i><b>15.2</b> Finding Primary Keys (harder)</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="relational-data.html"><a href="relational-data.html#exercise-19"><i class="fa fa-check"></i><b>15.2.1</b> Exercise</a></li>
<li class="chapter" data-level="15.2.2" data-path="relational-data.html"><a href="relational-data.html#exercise-20"><i class="fa fa-check"></i><b>15.2.2</b> Exercise</a></li>
<li class="chapter" data-level="15.2.3" data-path="relational-data.html"><a href="relational-data.html#exercise-21"><i class="fa fa-check"></i><b>15.2.3</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="relational-data.html"><a href="relational-data.html#selected-solutions-4"><i class="fa fa-check"></i><b>15.3</b> Selected Solutions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Web Scraping in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pulling-from-an-api-hechingers-report" class="section level1" number="12">
<h1><span class="header-section-number">Chapter 12</span> Pulling from an API: Hechinger’s Report</h1>
<p>The Hechinger’s Report created a college financial fitness report for most universities based off of the book <a href="https://jhupbooks.press.jhu.edu/title/college-stress-test"><em>College Stress Test</em></a><em>.</em> The report shows the financial health of a school along four metrics: enrollment, retention, average tuition, and appropriations. Let’s take a look at how UCSB did. The url for UCSB’s financial health report is <a href="https://tuitiontracker.org/fitness/school.html?unitid=110705" class="uri">https://tuitiontracker.org/fitness/school.html?unitid=110705</a>. The page looks like this (I added the green circle):</p>
<div class="figure">
<img src="web_scraping_tutorial/pictures/p1.png" alt="" />
<p class="caption">UCSB Report</p>
</div>
<p>We’re interested in getting the scores for the four stress variables. Bars filled in with red signify levels of stress. More red bars means more stress. In UCSB’s case, they have no stress (yay!). However, this isn’t in a format to pull directly into a tibble. Analysis is not possible…yet.</p>
<p>If we’re using Google chrome, we can dive into the website source code by right clicking on the page and choosing <code>inspect</code>:</p>
<div class="figure">
<img src="web_scraping_tutorial/pictures/p2.png" style="width:100.0%" alt="" />
<p class="caption">Opening Inspector</p>
</div>
<p>After opening inspector, we immediately see half our screen is engulfed with funky code. This is html code, the bones of the website:</p>
<div class="figure">
<img src="web_scraping_tutorial/pictures/p3.png" style="width:100.0%" alt="" />
<p class="caption">HTML Code</p>
</div>
<p>As a fun tangent, to see which part of the webpage corresponds to which part of the html code we can press <code>cmnd+shft+c</code> on a Mac. To exit out of this mode, we can press <code>esc</code>.</p>
<p>Most of the time, websites pull data from their own API. To see if this is the case here, we can go to the <em>network</em> tab:</p>
<div class="figure">
<img src="web_scraping_tutorial/pictures/p4.png" style="width:100.0%" alt="" />
<p class="caption">Press the Network tab: Green Arrow</p>
</div>
<p>Now that we have the network tab open, the key is to refresh the page. That way, we’ll be able to see all the files this web page pulls in. And with a bit of luck, we’ll find the file that houses all the data we need.</p>
<div class="figure">
<img src="web_scraping_tutorial/pictures/p5.png" style="width:100.0%" alt="" />
<p class="caption">Network Tab After Refreshing the Page</p>
</div>
<p>Most of these files are well beyond my understanding of website infrastructure. However, I have figured out that sites tend to store their underlying data as a <code>.csv</code> , <code>.json</code> or <code>.ndjson</code> . A <code>.json</code> is a more flexible <code>.csv</code>. Think of a <code>.json</code> as a <code>.csv</code> only instead of each cell housing a single data, it can house another <code>.csv</code>. In <code>R</code> terms, a <code>.json</code> is like a list. A <code>.ndjson</code> is like a <code>.json</code> only each row is it’s very own <code>.json</code>.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> Once we find a .<code>json</code>, we can right click it and copy the file path. Here, I’m opening <strong>110705.json</strong>:</p>
<div class="figure">
<img src="web_scraping_tutorial/pictures/p6.png" style="width:100.0%" alt="" />
<p class="caption">Opening .json Attempt 1</p>
</div>
<p>Once we copy the link address, we can paste it in a new tab in Chrome and see where it takes us:</p>
<div class="figure">
<img src="web_scraping_tutorial/pictures/p7.png" style="width:100.0%" alt="" />
<p class="caption">Opening the .json Link</p>
</div>
<p>We grabbed the right one. Nice! We can then import the file directly into <code>R</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="pulling-from-an-api-hechingers-report.html#cb7-1" aria-hidden="true" tabindex="-1"></a>ucsb <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">&quot;https://tuitiontracker.org/fitness/data/school-data/110705.json&quot;</span>)</span></code></pre></div>
<p>We can then grab things like the name, IPEDS UNITID, and the stress scores (stored in flags):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="pulling-from-an-api-hechingers-report.html#cb8-1" aria-hidden="true" tabindex="-1"></a>ucsb<span class="sc">$</span>institution</span></code></pre></div>
<pre><code>## [1] &quot;University of California-Santa Barbara&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="pulling-from-an-api-hechingers-report.html#cb10-1" aria-hidden="true" tabindex="-1"></a>ucsb<span class="sc">$</span>unitid</span></code></pre></div>
<pre><code>## [1] &quot;110705&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="pulling-from-an-api-hechingers-report.html#cb12-1" aria-hidden="true" tabindex="-1"></a>ucsb<span class="sc">$</span>flags</span></code></pre></div>
<pre><code>## [1] &quot;[0,0,0,0]&quot;</code></pre>
<p>Now, having data on one school is cool, but what if we had data on all the schools. For example, suppose we were interested in finding the stress scores for the following schools:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="pulling-from-an-api-hechingers-report.html#cb14-1" aria-hidden="true" tabindex="-1"></a>schools <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">schools =</span> <span class="fu">c</span>(<span class="st">&quot;UCSB&quot;</span>, <span class="st">&quot;Cal Poly SLO&quot;</span>, <span class="st">&quot;Sac State&quot;</span>),</span>
<span id="cb14-2"><a href="pulling-from-an-api-hechingers-report.html#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">unitid =</span> <span class="fu">c</span>(<span class="dv">110705</span>, <span class="dv">110422</span>, <span class="dv">110617</span>))</span>
<span id="cb14-3"><a href="pulling-from-an-api-hechingers-report.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(schools)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   schools      unitid
##   &lt;chr&gt;         &lt;dbl&gt;
## 1 UCSB         110705
## 2 Cal Poly SLO 110422
## 3 Sac State    110617</code></pre>
<p>Let’s look at the url for UCSB: "<a href="https://tuitiontracker.org/fitness/data/school-data/110705.json%22" class="uri">https://tuitiontracker.org/fitness/data/school-data/110705.json%22</a>.</p>
<p>Now, let’s look at the url for Sac State: "<a href="https://tuitiontracker.org/fitness/data/school-data/110705.json%22">https://tuitiontracker.org/fitness/data/school-data/110617.json"</a></p>
<p>Notice that the urls are identical except of the numbers before .json. Usually, websites have some sort of method for their url names. In this case, the data url is “<a href="https://tuitiontracker.org/fitness/data/school-data/" class="uri">https://tuitiontracker.org/fitness/data/school-data/</a><strong>UNITID</strong>.json,” where UNITID is the IPEDS UNITID. We can pull those off of IPEDS easy, so all we’d need to do to get the stress scores is loop through the UNITIDS! Let’s do that here:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="pulling-from-an-api-hechingers-report.html#cb16-1" aria-hidden="true" tabindex="-1"></a>num_schools <span class="ot">&lt;-</span> <span class="dv">3</span>  <span class="co"># interested in 3 schools</span></span>
<span id="cb16-2"><a href="pulling-from-an-api-hechingers-report.html#cb16-2" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">school =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, num_schools), <span class="at">unitid =</span> <span class="fu">rep</span>(<span class="cn">NA</span>,</span>
<span id="cb16-3"><a href="pulling-from-an-api-hechingers-report.html#cb16-3" aria-hidden="true" tabindex="-1"></a>    num_schools), <span class="at">enrollment_stress =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, num_schools),</span>
<span id="cb16-4"><a href="pulling-from-an-api-hechingers-report.html#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">retention_stress =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, num_schools), <span class="at">avg_tui_stress =</span> <span class="fu">rep</span>(<span class="cn">NA</span>,</span>
<span id="cb16-5"><a href="pulling-from-an-api-hechingers-report.html#cb16-5" aria-hidden="true" tabindex="-1"></a>        num_schools), <span class="at">approp_stress =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, num_schools))</span>
<span id="cb16-6"><a href="pulling-from-an-api-hechingers-report.html#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="pulling-from-an-api-hechingers-report.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_schools) {</span>
<span id="cb16-8"><a href="pulling-from-an-api-hechingers-report.html#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remember, we&#39;re polite, so we honor the 5 second</span></span>
<span id="cb16-9"><a href="pulling-from-an-api-hechingers-report.html#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rule</span></span>
<span id="cb16-10"><a href="pulling-from-an-api-hechingers-report.html#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">5</span>)</span>
<span id="cb16-11"><a href="pulling-from-an-api-hechingers-report.html#cb16-11" aria-hidden="true" tabindex="-1"></a>    school <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="fu">paste0</span>(<span class="st">&quot;https://tuitiontracker.org/fitness/data/school-data/&quot;</span>,</span>
<span id="cb16-12"><a href="pulling-from-an-api-hechingers-report.html#cb16-12" aria-hidden="true" tabindex="-1"></a>        schools<span class="sc">$</span>unitid[i], <span class="st">&quot;.json&quot;</span>))</span>
<span id="cb16-13"><a href="pulling-from-an-api-hechingers-report.html#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># clean the flag scores and unlist</span></span>
<span id="cb16-14"><a href="pulling-from-an-api-hechingers-report.html#cb16-14" aria-hidden="true" tabindex="-1"></a>    scores <span class="ot">&lt;-</span> school<span class="sc">$</span>flags <span class="sc">%&gt;%</span></span>
<span id="cb16-15"><a href="pulling-from-an-api-hechingers-report.html#cb16-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_replace_all</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[|</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="pulling-from-an-api-hechingers-report.html#cb16-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_split</span>(<span class="st">&quot;,&quot;</span>) <span class="sc">%&gt;%</span>  <span class="fu">str_split</span>(<span class="st">&quot;,&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-17"><a href="pulling-from-an-api-hechingers-report.html#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>()</span>
<span id="cb16-18"><a href="pulling-from-an-api-hechingers-report.html#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save the stuff</span></span>
<span id="cb16-19"><a href="pulling-from-an-api-hechingers-report.html#cb16-19" aria-hidden="true" tabindex="-1"></a>    dat<span class="sc">$</span>school[i] <span class="ot">&lt;-</span> school<span class="sc">$</span>institution</span>
<span id="cb16-20"><a href="pulling-from-an-api-hechingers-report.html#cb16-20" aria-hidden="true" tabindex="-1"></a>    dat<span class="sc">$</span>unitid[i] <span class="ot">&lt;-</span> school<span class="sc">$</span>unitid</span>
<span id="cb16-21"><a href="pulling-from-an-api-hechingers-report.html#cb16-21" aria-hidden="true" tabindex="-1"></a>    dat<span class="sc">$</span>enrollment_stress[i] <span class="ot">&lt;-</span> scores[<span class="dv">1</span>]</span>
<span id="cb16-22"><a href="pulling-from-an-api-hechingers-report.html#cb16-22" aria-hidden="true" tabindex="-1"></a>    dat<span class="sc">$</span>retention_stress[i] <span class="ot">&lt;-</span> scores[<span class="dv">2</span>]</span>
<span id="cb16-23"><a href="pulling-from-an-api-hechingers-report.html#cb16-23" aria-hidden="true" tabindex="-1"></a>    dat<span class="sc">$</span>avg_tui_stress[i] <span class="ot">&lt;-</span> scores[<span class="dv">3</span>]</span>
<span id="cb16-24"><a href="pulling-from-an-api-hechingers-report.html#cb16-24" aria-hidden="true" tabindex="-1"></a>    dat<span class="sc">$</span>approp_stress[i] <span class="ot">&lt;-</span> scores[<span class="dv">4</span>]</span>
<span id="cb16-25"><a href="pulling-from-an-api-hechingers-report.html#cb16-25" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Warning in stri_split_regex(string, pattern, n = n, simplify = simplify, :
## argument is not an atomic vector; coercing

## Warning in stri_split_regex(string, pattern, n = n, simplify = simplify, :
## argument is not an atomic vector; coercing

## Warning in stri_split_regex(string, pattern, n = n, simplify = simplify, :
## argument is not an atomic vector; coercing</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="pulling-from-an-api-hechingers-report.html#cb18-1" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##   school   unitid enrollment_stre… retention_stress avg_tui_stress approp_stress
##   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;          &lt;chr&gt;        
## 1 Univers… 110705 &quot;c(\&quot;0\&quot;&quot;        &quot; \&quot;0\&quot;&quot;         &quot; \&quot;0\&quot;&quot;       &quot; \&quot;0\&quot;)&quot;    
## 2 Califor… 110422 &quot;c(\&quot;0\&quot;&quot;        &quot; \&quot;0\&quot;&quot;         &quot; \&quot;0\&quot;&quot;       &quot; \&quot;0\&quot;)&quot;    
## 3 Califor… 110617 &quot;c(\&quot;0\&quot;&quot;        &quot; \&quot;0\&quot;&quot;         &quot; \&quot;3\&quot;&quot;       &quot; \&quot;0\&quot;)&quot;</code></pre>
<p>To recap, we performed the following steps:</p>
<ol style="list-style-type: decimal">
<li><p>Identified a website we wanted to scrape</p></li>
<li><p>Used the <code>polite</code> package to see if we were allowed to scrape the site</p></li>
<li><p>We used Google Chrome’s inspector function to look at the source code</p></li>
<li><p>We went to network and refreshed the page to try and find the source of the data</p></li>
<li><p>We guessed which file had the data. When we found it, we imported the data into <code>R</code> using the url.</p></li>
</ol>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>You’ll have to work with <code>.ndjson</code> files if you want to use the Parler data dump.<a href="pulling-from-an-api-hechingers-report.html#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="can-i-scrape-from-this-site.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="web-scraping-ucsb-economics-contact-information.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jules32/bookdown-tutorial/edit/master/web_scraping_tutorial/web_scrape_lecture.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
