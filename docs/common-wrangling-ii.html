<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Common Wrangling II | Data Wrangling for Economists</title>
  <meta name="description" content="Enter description." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Common Wrangling II | Data Wrangling for Economists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Enter description." />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Common Wrangling II | Data Wrangling for Economists" />
  
  <meta name="twitter:description" content="Enter description." />
  

<meta name="author" content="Michael Topper" />
<meta name="author" content="Danny Klinenberg" />


<meta name="date" content="2023-06-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="common-wrangling-i.html"/>
<link rel="next" href="selected-solutions-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Wrangling for Economists</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i><b>1.1</b> Organization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>2</b> Intro to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#basic-summary-statistics"><i class="fa fa-check"></i><b>2.1</b> Basic summary statistics</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise"><i class="fa fa-check"></i><b>2.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro-to-r.html"><a href="intro-to-r.html#basic-histogram"><i class="fa fa-check"></i><b>2.2</b> Basic histogram</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-1"><i class="fa fa-check"></i><b>2.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro-to-r.html"><a href="intro-to-r.html#creating-vectors"><i class="fa fa-check"></i><b>2.3</b> Creating Vectors</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-2"><i class="fa fa-check"></i><b>2.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro-to-r.html"><a href="intro-to-r.html#comparing-vectors"><i class="fa fa-check"></i><b>2.4</b> Comparing Vectors</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-3"><i class="fa fa-check"></i><b>2.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-to-r.html"><a href="intro-to-r.html#creating-a-tibble"><i class="fa fa-check"></i><b>2.5</b> Creating a tibble</a></li>
<li class="chapter" data-level="2.6" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-4"><i class="fa fa-check"></i><b>2.6</b> Exercise</a></li>
<li class="chapter" data-level="2.7" data-path="intro-to-r.html"><a href="intro-to-r.html#selected-solutions"><i class="fa fa-check"></i><b>2.7</b> Selected Solutions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-rproject.html"><a href="the-rproject.html"><i class="fa fa-check"></i><b>3</b> The <code>Rproject</code></a></li>
<li class="chapter" data-level="4" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>4</b> Git and Github</a>
<ul>
<li class="chapter" data-level="4.1" data-path="git-and-github.html"><a href="git-and-github.html#installing-git"><i class="fa fa-check"></i><b>4.1</b> Installing Git</a></li>
<li class="chapter" data-level="4.2" data-path="git-and-github.html"><a href="git-and-github.html#create-a-github-account"><i class="fa fa-check"></i><b>4.2</b> Create a Github account</a></li>
<li class="chapter" data-level="4.3" data-path="git-and-github.html"><a href="git-and-github.html#introduce-yourself-to-git"><i class="fa fa-check"></i><b>4.3</b> Introduce yourself to Git</a></li>
<li class="chapter" data-level="4.4" data-path="git-and-github.html"><a href="git-and-github.html#create-a-pat"><i class="fa fa-check"></i><b>4.4</b> Create a PAT</a></li>
<li class="chapter" data-level="4.5" data-path="git-and-github.html"><a href="git-and-github.html#the-workflow"><i class="fa fa-check"></i><b>4.5</b> The Workflow</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="git-and-github.html"><a href="git-and-github.html#definitions"><i class="fa fa-check"></i><b>4.5.1</b> Definitions</a></li>
<li class="chapter" data-level="4.5.2" data-path="git-and-github.html"><a href="git-and-github.html#the-workflow-1"><i class="fa fa-check"></i><b>4.5.2</b> The Workflow</a></li>
<li class="chapter" data-level="4.5.3" data-path="git-and-github.html"><a href="git-and-github.html#the-git-panel-of-rstudio"><i class="fa fa-check"></i><b>4.5.3</b> The Git panel of RStudio</a></li>
<li class="chapter" data-level="4.5.4" data-path="git-and-github.html"><a href="git-and-github.html#pulling"><i class="fa fa-check"></i><b>4.5.4</b> Pulling</a></li>
<li class="chapter" data-level="4.5.5" data-path="git-and-github.html"><a href="git-and-github.html#commiting"><i class="fa fa-check"></i><b>4.5.5</b> Commiting</a></li>
<li class="chapter" data-level="4.5.6" data-path="git-and-github.html"><a href="git-and-github.html#pushing"><i class="fa fa-check"></i><b>4.5.6</b> Pushing</a></li>
<li class="chapter" data-level="4.5.7" data-path="git-and-github.html"><a href="git-and-github.html#pulling-again"><i class="fa fa-check"></i><b>4.5.7</b> Pulling (again)</a></li>
<li class="chapter" data-level="4.5.8" data-path="git-and-github.html"><a href="git-and-github.html#the-main-commands-command-lineterminal"><i class="fa fa-check"></i><b>4.5.8</b> The Main Commands (Command Line/Terminal)</a></li>
<li class="chapter" data-level="4.5.9" data-path="git-and-github.html"><a href="git-and-github.html#exercise-5"><i class="fa fa-check"></i><b>4.5.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="git-and-github.html"><a href="git-and-github.html#branches"><i class="fa fa-check"></i><b>4.6</b> Branches</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="git-and-github.html"><a href="git-and-github.html#creating-a-branch"><i class="fa fa-check"></i><b>4.6.1</b> Creating a branch</a></li>
<li class="chapter" data-level="4.6.2" data-path="git-and-github.html"><a href="git-and-github.html#branches-when-working-independently"><i class="fa fa-check"></i><b>4.6.2</b> Branches when working independently</a></li>
<li class="chapter" data-level="4.6.3" data-path="git-and-github.html"><a href="git-and-github.html#branches-when-working-collaboratively"><i class="fa fa-check"></i><b>4.6.3</b> Branches when working collaboratively</a></li>
<li class="chapter" data-level="4.6.4" data-path="git-and-github.html"><a href="git-and-github.html#branches-with-the-terminal"><i class="fa fa-check"></i><b>4.6.4</b> Branches with the Terminal</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="git-and-github.html"><a href="git-and-github.html#gitignore"><i class="fa fa-check"></i><b>4.7</b> .gitignore</a></li>
<li class="chapter" data-level="4.8" data-path="git-and-github.html"><a href="git-and-github.html#reverting"><i class="fa fa-check"></i><b>4.8</b> Reverting</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="git-and-github.html"><a href="git-and-github.html#reverting-safelty"><i class="fa fa-check"></i><b>4.8.1</b> Reverting Safelty</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html"><i class="fa fa-check"></i><b>5</b> Common Wrangling I</a>
<ul>
<li class="chapter" data-level="5.1" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-pipe"><i class="fa fa-check"></i><b>5.1</b> The Pipe</a></li>
<li class="chapter" data-level="5.2" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-clean_names-function"><i class="fa fa-check"></i><b>5.2</b> The <code>clean_names</code> function</a></li>
<li class="chapter" data-level="5.3" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-select-function"><i class="fa fa-check"></i><b>5.3</b> The <code>select</code> function</a></li>
<li class="chapter" data-level="5.4" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-filter-function"><i class="fa fa-check"></i><b>5.4</b> The <code>filter</code> function</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#exercise-6"><i class="fa fa-check"></i><b>5.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-drop_na-function"><i class="fa fa-check"></i><b>5.5</b> The <code>drop_na</code> function</a></li>
<li class="chapter" data-level="5.6" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-distinct-function"><i class="fa fa-check"></i><b>5.6</b> The <code>distinct</code> function</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#exercise-7"><i class="fa fa-check"></i><b>5.6.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-mutate-function."><i class="fa fa-check"></i><b>5.7</b> The <code>mutate</code> function.</a></li>
<li class="chapter" data-level="5.8" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-summarize-function"><i class="fa fa-check"></i><b>5.8</b> The <code>summarize</code> function</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#exercise-8"><i class="fa fa-check"></i><b>5.8.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#the-group_by-and-summarize-functions"><i class="fa fa-check"></i><b>5.9</b> The <code>group_by</code> and <code>summarize</code> functions</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#exercise-9"><i class="fa fa-check"></i><b>5.9.1</b> Exercise</a></li>
<li class="chapter" data-level="5.9.2" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#exercise-10"><i class="fa fa-check"></i><b>5.9.2</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="common-wrangling-i.html"><a href="common-wrangling-i.html#selected-solutions-1"><i class="fa fa-check"></i><b>5.10</b> Selected Solutions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html"><i class="fa fa-check"></i><b>6</b> Common Wrangling II</a>
<ul>
<li class="chapter" data-level="6.1" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#the-count-function"><i class="fa fa-check"></i><b>6.1</b> The <code>count</code> function</a></li>
<li class="chapter" data-level="6.2" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#the-slice-and-pull-functions"><i class="fa fa-check"></i><b>6.2</b> The <code>slice</code> and <code>pull</code> functions</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#exercise-11"><i class="fa fa-check"></i><b>6.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#using-the-is.na-function"><i class="fa fa-check"></i><b>6.3</b> Using the <code>is.na</code> function</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#exercise-12"><i class="fa fa-check"></i><b>6.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#the-arrange-function"><i class="fa fa-check"></i><b>6.4</b> The <code>arrange</code> function</a></li>
<li class="chapter" data-level="6.5" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#the-filter-function-with-logicals"><i class="fa fa-check"></i><b>6.5</b> The <code>filter</code> function with logicals</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#exercise-13"><i class="fa fa-check"></i><b>6.5.1</b> Exercise</a></li>
<li class="chapter" data-level="6.5.2" data-path="common-wrangling-ii.html"><a href="common-wrangling-ii.html#exercise-14"><i class="fa fa-check"></i><b>6.5.2</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="selected-solutions-2.html"><a href="selected-solutions-2.html"><i class="fa fa-check"></i><b>7</b> Selected Solutions</a></li>
<li class="chapter" data-level="8" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Graphics with ggplot2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>8.1</b> The grammar of graphics</a></li>
<li class="chapter" data-level="8.2" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#adding-options"><i class="fa fa-check"></i><b>8.2</b> Adding options</a></li>
<li class="chapter" data-level="8.3" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#adding-multiple-plots-together"><i class="fa fa-check"></i><b>8.3</b> Adding multiple plots together</a></li>
<li class="chapter" data-level="8.4" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#creating-legends"><i class="fa fa-check"></i><b>8.4</b> Creating legends</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#exercise-15"><i class="fa fa-check"></i><b>8.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#what-to-put-in-the-aes-function-how-do-i-know"><i class="fa fa-check"></i><b>8.5</b> What to put in the <code>aes</code> function? How do I know?</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#what-other-arguments-can-i-pass-into-the-aes-function"><i class="fa fa-check"></i><b>8.5.1</b> What other arguments can I pass into the <code>aes</code> function?</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#using-the-pipe"><i class="fa fa-check"></i><b>8.6</b> Using the pipe</a></li>
<li class="chapter" data-level="8.7" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#faceting"><i class="fa fa-check"></i><b>8.7</b> Faceting</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#cleaning-up-the-graph"><i class="fa fa-check"></i><b>8.7.1</b> Cleaning up the graph</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#saving-ggplot-objects-and-adding-layers-later"><i class="fa fa-check"></i><b>8.8</b> Saving ggplot objects and adding layers later</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="file-organization.html"><a href="file-organization.html"><i class="fa fa-check"></i><b>9</b> File Organization</a>
<ul>
<li class="chapter" data-level="9.1" data-path="file-organization.html"><a href="file-organization.html#organizing"><i class="fa fa-check"></i><b>9.1</b> Organizing</a></li>
<li class="chapter" data-level="9.2" data-path="file-organization.html"><a href="file-organization.html#rmarkdown"><i class="fa fa-check"></i><b>9.2</b> <code>Rmarkdown</code></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="file-organization.html"><a href="file-organization.html#the-anatomy-of-an-rmarkdown-file"><i class="fa fa-check"></i><b>9.2.1</b> The Anatomy of an <code>Rmarkdown</code> File</a></li>
<li class="chapter" data-level="9.2.2" data-path="file-organization.html"><a href="file-organization.html#the-body-of-the-rmarkdown"><i class="fa fa-check"></i><b>9.2.2</b> The Body of the <code>Rmarkdown</code></a></li>
<li class="chapter" data-level="9.2.3" data-path="file-organization.html"><a href="file-organization.html#childing"><i class="fa fa-check"></i><b>9.2.3</b> Childing</a></li>
<li class="chapter" data-level="9.2.4" data-path="file-organization.html"><a href="file-organization.html#bibliographies"><i class="fa fa-check"></i><b>9.2.4</b> Bibliographies</a></li>
<li class="chapter" data-level="9.2.5" data-path="file-organization.html"><a href="file-organization.html#a-final-note-on-rmarkdown-visual-markdown-editor"><i class="fa fa-check"></i><b>9.2.5</b> A Final Note on <code>Rmarkdown</code>: Visual Markdown Editor</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>10</b> Strings</a>
<ul>
<li class="chapter" data-level="10.1" data-path="strings.html"><a href="strings.html#regular-expressions"><i class="fa fa-check"></i><b>10.1</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="strings.html"><a href="strings.html#exercise-1-1"><i class="fa fa-check"></i><b>10.1.1</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="strings.html"><a href="strings.html#regular-expressions-continued"><i class="fa fa-check"></i><b>10.2</b> Regular Expressions Continued</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="strings.html"><a href="strings.html#exercise-2-1"><i class="fa fa-check"></i><b>10.2.1</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="strings.html"><a href="strings.html#using-extract"><i class="fa fa-check"></i><b>10.3</b> Using <code>extract</code></a></li>
<li class="chapter" data-level="10.4" data-path="strings.html"><a href="strings.html#using-separate"><i class="fa fa-check"></i><b>10.4</b> Using <code>separate</code></a></li>
<li class="chapter" data-level="10.5" data-path="strings.html"><a href="strings.html#the-str_replace-function"><i class="fa fa-check"></i><b>10.5</b> The <code>str_replace</code> function</a></li>
<li class="chapter" data-level="10.6" data-path="strings.html"><a href="strings.html#the-str_replace_all-function"><i class="fa fa-check"></i><b>10.6</b> The <code>str_replace_all</code> function</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="strings.html"><a href="strings.html#exercise-3-1"><i class="fa fa-check"></i><b>10.6.1</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="strings.html"><a href="strings.html#solutions"><i class="fa fa-check"></i><b>10.7</b> Solutions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="webscraping.html"><a href="webscraping.html"><i class="fa fa-check"></i><b>11</b> Webscraping</a>
<ul>
<li class="chapter" data-level="11.1" data-path="webscraping.html"><a href="webscraping.html#background-knowledge---brief-html-lesson"><i class="fa fa-check"></i><b>11.1</b> Background Knowledge - Brief HTML Lesson</a></li>
<li class="chapter" data-level="11.2" data-path="webscraping.html"><a href="webscraping.html#webscraping-with-rvest"><i class="fa fa-check"></i><b>11.2</b> Webscraping with <code>rvest</code></a></li>
<li class="chapter" data-level="11.3" data-path="webscraping.html"><a href="webscraping.html#common-workflow."><i class="fa fa-check"></i><b>11.3</b> Common Workflow.</a></li>
<li class="chapter" data-level="11.4" data-path="webscraping.html"><a href="webscraping.html#example-craigslist"><i class="fa fa-check"></i><b>11.4</b> Example: Craigslist</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="webscraping.html"><a href="webscraping.html#extracting-the-descriptions"><i class="fa fa-check"></i><b>11.4.1</b> Extracting the Descriptions</a></li>
<li class="chapter" data-level="11.4.2" data-path="webscraping.html"><a href="webscraping.html#brief-hiatus-css-selectors"><i class="fa fa-check"></i><b>11.4.2</b> Brief Hiatus: CSS Selectors</a></li>
<li class="chapter" data-level="11.4.3" data-path="webscraping.html"><a href="webscraping.html#extracting-the-hyperlinks"><i class="fa fa-check"></i><b>11.4.3</b> Extracting the Hyperlinks</a></li>
<li class="chapter" data-level="11.4.4" data-path="webscraping.html"><a href="webscraping.html#binding-the-information-together"><i class="fa fa-check"></i><b>11.4.4</b> Binding the Information Together</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="webscraping.html"><a href="webscraping.html#example-wikipedia"><i class="fa fa-check"></i><b>11.5</b> Example: Wikipedia</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>12</b> Programming</a>
<ul>
<li class="chapter" data-level="12.1" data-path="programming.html"><a href="programming.html#functions"><i class="fa fa-check"></i><b>12.1</b> Functions</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="programming.html"><a href="programming.html#exercise-16"><i class="fa fa-check"></i><b>12.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="programming.html"><a href="programming.html#for-loops"><i class="fa fa-check"></i><b>12.2</b> For-loops</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="programming.html"><a href="programming.html#exercise-17"><i class="fa fa-check"></i><b>12.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="programming.html"><a href="programming.html#if-else"><i class="fa fa-check"></i><b>12.3</b> If-else</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="programming.html"><a href="programming.html#exercise-18"><i class="fa fa-check"></i><b>12.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="programming.html"><a href="programming.html#selected-solutions-3"><i class="fa fa-check"></i><b>12.4</b> Selected Solutions</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>13</b> Relational Data</a>
<ul>
<li class="chapter" data-level="13.1" data-path="relational-data.html"><a href="relational-data.html#finding-primary-keys"><i class="fa fa-check"></i><b>13.1</b> Finding Primary Keys</a></li>
<li class="chapter" data-level="13.2" data-path="relational-data.html"><a href="relational-data.html#finding-primary-keys-harder"><i class="fa fa-check"></i><b>13.2</b> Finding Primary Keys (harder)</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="relational-data.html"><a href="relational-data.html#exercise-19"><i class="fa fa-check"></i><b>13.2.1</b> Exercise</a></li>
<li class="chapter" data-level="13.2.2" data-path="relational-data.html"><a href="relational-data.html#exercise-20"><i class="fa fa-check"></i><b>13.2.2</b> Exercise</a></li>
<li class="chapter" data-level="13.2.3" data-path="relational-data.html"><a href="relational-data.html#exercise-21"><i class="fa fa-check"></i><b>13.2.3</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="relational-data.html"><a href="relational-data.html#selected-solutions-4"><i class="fa fa-check"></i><b>13.3</b> Selected Solutions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Wrangling for Economists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="common-wrangling-ii" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Common Wrangling II<a href="common-wrangling-ii.html#common-wrangling-ii" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>For this chapter, we will be importing a dataset from TidyTuesday Github. Tidy Tuesday is a weekly social data project in R where users explore a new dataset each week and share their findings on Twitter with #TidyTuesday. In particular, we will be focusing on a horror movies data set from IMDB. IMDB is the world’s most popular and authoritative source for movie, TV and celebrity content, designed to help fans explore the world of movies and shows and decide what to watch. This data set shows us information on horror movies that are on IMDB’s website. Here are some important variables we will be working with:</p>
<ul>
<li><code>review_rating</code>- the IMDB users average rating of the movie.</li>
<li><code>release_country</code> - the country the movie was released in.</li>
<li><code>movie_rating</code> - the movie’s Motion Picture Association film rating system score (e.g. G, PG, PG-13)</li>
</ul>
<p>We will be focusing on getting comfortable with the following functions:</p>
<ul>
<li><code>count</code></li>
<li><code>slice</code></li>
<li><code>pull</code></li>
<li><code>is.na</code></li>
<li><code>arrange</code></li>
<li><code>filter</code> in conjunction with logicals</li>
<li><code>adorn_totals</code> from the janitor package (<code>janitor::adorn_totals</code>)</li>
</ul>
<p>Let’s begin by importing in the data. To do this, we will be importing it using the <code>read_csv</code> function. Copy and paste the following link: <a href="https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-22/horror_movies.csv" class="uri">https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-22/horror_movies.csv</a>
and put it into a tibble called <code>horror_movies</code> using the <code>read_csv</code> function as shown below.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="common-wrangling-ii.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install the package if you do not have it</span></span>
<span id="cb94-2"><a href="common-wrangling-ii.html#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb94-3"><a href="common-wrangling-ii.html#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="common-wrangling-ii.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="do">## loading in the data</span></span>
<span id="cb94-5"><a href="common-wrangling-ii.html#cb94-5" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-22/horror_movies.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 3328 Columns: 12
## ── Column specification ───────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (11): title, genres, release_date, release_country, movie_rating, movie_run_tim...
## dbl  (1): review_rating
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Notice how easy it was to read data off of a website and into R using the <code>read_csv</code> function: all it took was copying a pasting a link.</p>
<div id="the-count-function" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> The <code>count</code> function<a href="common-wrangling-ii.html#the-count-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>count</code> function takes all of the unique elements in a column, and counts how many times each element occurs. For instance, say we want to find the amount of times each movie rating occurs in our data set. We can do this using the <code>count</code> function.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="common-wrangling-ii.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="do">## finding out how many of each rating of horror movie there are</span></span>
<span id="cb96-2"><a href="common-wrangling-ii.html#cb96-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb96-3"><a href="common-wrangling-ii.html#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating)</span></code></pre></div>
<pre><code>## # A tibble: 12 × 2
##    movie_rating     n
##    &lt;chr&gt;        &lt;int&gt;
##  1 E                1
##  2 NC-17            1
##  3 NOT RATED      699
##  4 PG               5
##  5 PG-13           79
##  6 R              416
##  7 TV-14           33
##  8 TV-MA          107
##  9 TV-PG            1
## 10 UNRATED        108
## 11 X                1
## 12 &lt;NA&gt;          1877</code></pre>
<p>The <code>count</code> function also has a helpful argument called <code>sort</code>. By default, <code>sort</code> is set to <code>FALSE</code>. This means that the <code>count</code> function will not order your results in descending order by the number of times they occur. If you want to view your elements in descending order, you can set the <code>sort</code> argument to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="common-wrangling-ii.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="do">## counting in descending order by setting sort = T</span></span>
<span id="cb98-2"><a href="common-wrangling-ii.html#cb98-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb98-3"><a href="common-wrangling-ii.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 12 × 2
##    movie_rating     n
##    &lt;chr&gt;        &lt;int&gt;
##  1 &lt;NA&gt;          1877
##  2 NOT RATED      699
##  3 R              416
##  4 UNRATED        108
##  5 TV-MA          107
##  6 PG-13           79
##  7 TV-14           33
##  8 PG               5
##  9 E                1
## 10 NC-17            1
## 11 TV-PG            1
## 12 X                1</code></pre>
<p>The <code>sort</code> argument is particularly useful for spotting things like a large amount of NAs, or getting an idea of how a column is distributed.</p>
</div>
<div id="the-slice-and-pull-functions" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> The <code>slice</code> and <code>pull</code> functions<a href="common-wrangling-ii.html#the-slice-and-pull-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Oftentimes, we want to extract a particular entry in a column and save it into a vector. For example, suppose you are asked to find the second most frequent occurrence of the <code>movie_rating</code> column and then save this category in a vector named <code>second_most_frequent_movie_rating</code>. The <strong>bad solution which you should never do unless absolutely necessary</strong> would be as follows:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="common-wrangling-ii.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="do">## do not do this unless absolutely necessary</span></span>
<span id="cb100-2"><a href="common-wrangling-ii.html#cb100-2" aria-hidden="true" tabindex="-1"></a>second_most_frequent_movie_rating <span class="ot">&lt;-</span> <span class="st">&quot;NOT RATED&quot;</span></span></code></pre></div>
<p>This solution is poor because this data could easily be updated or changed. If this happened, “NOT RATED” may no longer be the second most frequent occurrence of the <code>movie_rating</code> column! Hence, we want to find a way to do this <em>programmatically</em>. This is where <code>slice</code> and <code>pull</code> will assist us. The <code>slice</code> function simply slices the data by a certain amount of rows that you type in. Observe:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="common-wrangling-ii.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="do">## gets the first row of the counted up tibble</span></span>
<span id="cb101-2"><a href="common-wrangling-ii.html#cb101-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="common-wrangling-ii.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb101-4"><a href="common-wrangling-ii.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">2</span>) <span class="do">## the 2 says to only take out the second row</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   movie_rating     n
##   &lt;chr&gt;        &lt;int&gt;
## 1 NOT RATED      699</code></pre>
<p>In the above code, only the second row is sliced from the tibble (hence, the 2). However, we can also slice more rows than just one:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="common-wrangling-ii.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="do">## gets the first 3 rows </span></span>
<span id="cb103-2"><a href="common-wrangling-ii.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1:3 means &quot;one to three&quot; in R language</span></span>
<span id="cb103-3"><a href="common-wrangling-ii.html#cb103-3" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb103-4"><a href="common-wrangling-ii.html#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb103-5"><a href="common-wrangling-ii.html#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   movie_rating     n
##   &lt;chr&gt;        &lt;int&gt;
## 1 &lt;NA&gt;          1877
## 2 NOT RATED      699
## 3 R              416</code></pre>
<p>In the above code, the first three rows are sliced from the tibble by using the <code>1:3</code> code which is translated as “one to three” in R.</p>
<p>Notice that while the <code>slice</code> function is useful, it needs help from <code>pull</code> to get our desired result. The <code>pull</code> function will essentially allow us to extract the values from a column into a vector. Observe:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="common-wrangling-ii.html#cb105-1" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="common-wrangling-ii.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="common-wrangling-ii.html#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span>  <span class="do">## the 2 says to only slice the second row </span></span>
<span id="cb105-4"><a href="common-wrangling-ii.html#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(movie_rating) <span class="do">## telling R to pull the elements from the movie_rating column</span></span></code></pre></div>
<pre><code>## [1] &quot;NOT RATED&quot;</code></pre>
<p>Here, the <code>pull</code> function simply extracts the values from <code>movie_rating</code> and makes it into a vector. We can then save this vector with our desired name that will update <em>programmatically</em> as follows:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="common-wrangling-ii.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="do">## saving the second most frequent movie rating into a vector named</span></span>
<span id="cb107-2"><a href="common-wrangling-ii.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="do">## second_most_frequent_movie_rating</span></span>
<span id="cb107-3"><a href="common-wrangling-ii.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="do">## this is a programmatic and excellent solution</span></span>
<span id="cb107-4"><a href="common-wrangling-ii.html#cb107-4" aria-hidden="true" tabindex="-1"></a>second_most_frequent_movie_rating <span class="ot">&lt;-</span> horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb107-5"><a href="common-wrangling-ii.html#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb107-6"><a href="common-wrangling-ii.html#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span>  <span class="do">## the 2 says to only slice the second row </span></span>
<span id="cb107-7"><a href="common-wrangling-ii.html#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(movie_rating) <span class="do">## telling R to pull the elements from the movie_rating column</span></span>
<span id="cb107-8"><a href="common-wrangling-ii.html#cb107-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-9"><a href="common-wrangling-ii.html#cb107-9" aria-hidden="true" tabindex="-1"></a>second_most_frequent_movie_rating</span></code></pre></div>
<pre><code>## [1] &quot;NOT RATED&quot;</code></pre>
<p>We can similarly do it with a larger tibble and get the top three most frequent movie ratings into a vector:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="common-wrangling-ii.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="do">## getting the top three most frequent movie ratings</span></span>
<span id="cb109-2"><a href="common-wrangling-ii.html#cb109-2" aria-hidden="true" tabindex="-1"></a>top_three_frequent_movie_ratings <span class="ot">&lt;-</span> horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb109-3"><a href="common-wrangling-ii.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb109-4"><a href="common-wrangling-ii.html#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span>  <span class="do">## the 1:3 means row 1 to row 3 </span></span>
<span id="cb109-5"><a href="common-wrangling-ii.html#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(movie_rating) <span class="do">## telling R to pull the elements from the movie_rating column</span></span>
<span id="cb109-6"><a href="common-wrangling-ii.html#cb109-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-7"><a href="common-wrangling-ii.html#cb109-7" aria-hidden="true" tabindex="-1"></a>top_three_frequent_movie_ratings</span></code></pre></div>
<pre><code>## [1] NA          &quot;NOT RATED&quot; &quot;R&quot;</code></pre>
<div id="exercise-11" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Exercise<a href="common-wrangling-ii.html#exercise-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>What is the most frequent review rating? Save this as a vector named <code>most_frequent_review_rating</code>.</li>
</ul>
</div>
</div>
<div id="using-the-is.na-function" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Using the <code>is.na</code> function<a href="common-wrangling-ii.html#using-the-is.na-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>is.na</code> function used to find the NAs withing a particular column. It takes one argument: the column you specify . The <code>is.na</code> function works particularly well with the <code>filter</code> function. Suppose we want to see how many NAs are in the <code>movie_rating</code> column. We can do this by <code>count</code>, and a <code>filter</code> in conjunction with the <code>is.na</code> function.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="common-wrangling-ii.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Looking at only the NAs</span></span>
<span id="cb111-2"><a href="common-wrangling-ii.html#cb111-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb111-3"><a href="common-wrangling-ii.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(movie_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb111-4"><a href="common-wrangling-ii.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(movie_rating))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   movie_rating     n
##   &lt;chr&gt;        &lt;int&gt;
## 1 &lt;NA&gt;          1877</code></pre>
<p>While this is useful, it might be even <em>more</em> useful if we filter out the NAs. Observe:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="common-wrangling-ii.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtering out the NAs</span></span>
<span id="cb113-2"><a href="common-wrangling-ii.html#cb113-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb113-3"><a href="common-wrangling-ii.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(review_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb113-4"><a href="common-wrangling-ii.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(review_rating))</span></code></pre></div>
<pre><code>## # A tibble: 87 × 2
##    review_rating     n
##            &lt;dbl&gt; &lt;int&gt;
##  1           4.7    95
##  2           5.2    89
##  3           5.7    89
##  4           4.8    83
##  5           5      83
##  6           4.6    82
##  7           5.6    81
##  8           4.3    80
##  9           5.1    78
## 10           5.3    78
## # ℹ 77 more rows</code></pre>
<p>What exactly happened here? The <code>!</code> logical is the “not” or “negating” logical. If we were to type <code>filter(is.na(review_rating))</code> we are telling R to filter all the elements inside of <code>review_rating</code> that are NA. However, if we type <code>filter(!is.na(review_rating))</code> we are telling R to NOT filter all the elements inside of <code>review_rating</code> taht are NA. Hence, we are actually filtering out the NAs in this line of code.</p>
<p>However, notice that you can actually do this using the <code>drop_na</code> function as well:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="common-wrangling-ii.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtering out the NAs</span></span>
<span id="cb115-2"><a href="common-wrangling-ii.html#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="do">## same result as using filter(!is.na(review_rating))</span></span>
<span id="cb115-3"><a href="common-wrangling-ii.html#cb115-3" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb115-4"><a href="common-wrangling-ii.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(review_rating, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb115-5"><a href="common-wrangling-ii.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(review_rating)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 2
##    review_rating     n
##            &lt;dbl&gt; &lt;int&gt;
##  1           4.7    95
##  2           5.2    89
##  3           5.7    89
##  4           4.8    83
##  5           5      83
##  6           4.6    82
##  7           5.6    81
##  8           4.3    80
##  9           5.1    78
## 10           5.3    78
## # ℹ 77 more rows</code></pre>
<div id="exercise-12" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Exercise<a href="common-wrangling-ii.html#exercise-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Make a new tibble called <span class="math inline">\(\color{magenta}{\text{horrror\_movies\_NA}}\)</span> that filters out all the NAs in the entire data set.</li>
</ul>
</div>
</div>
<div id="the-arrange-function" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> The <code>arrange</code> function<a href="common-wrangling-ii.html#the-arrange-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The arrange function is a simple function that simply sorts columns into ascending or descending order. For instance, suppose we sort our entire data set by which movies had the highest <code>review_rating</code>. We could do this by using the <code>arrange</code> function:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="common-wrangling-ii.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="do">## using the arrange function to sort the review rating from lowest to highest</span></span>
<span id="cb117-2"><a href="common-wrangling-ii.html#cb117-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="common-wrangling-ii.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(review_rating) <span class="sc">%&gt;%</span> </span>
<span id="cb117-4"><a href="common-wrangling-ii.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 12
##    title  genres release_date release_country movie_rating review_rating movie_run_time
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;           &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;         
##  1 Count… Horror 8-Sep-17     USA             &lt;NA&gt;                   1   &lt;NA&gt;          
##  2 Una C… Comed… 21-Sep-17    Peru            &lt;NA&gt;                   1   91 min        
##  3 A Rai… Horror 4-Jun-16     Japan           &lt;NA&gt;                   1.2 &lt;NA&gt;          
##  4 Potat… Comed… 23-Jul-15    Germany         &lt;NA&gt;                   1.3 81 min        
##  5 Dead … Horror 31-Jul-13    USA             TV-MA                  1.4 75 min        
##  6 Amity… Horror 3-Jan-17     USA             &lt;NA&gt;                   1.5 77 min        
##  7 Shark… Horror 14-Aug-15    USA             &lt;NA&gt;                   1.5 71 min        
##  8 Attac… Actio… 20-Apr-12    India           &lt;NA&gt;                   1.5 75 min        
##  9 Inter… Actio… 9-May-16     USA             &lt;NA&gt;                   1.6 49 min        
## 10 Raide… Actio… 19-May-15    USA             NOT RATED              1.6 71 min        
## # ℹ 5 more variables: plot &lt;chr&gt;, cast &lt;chr&gt;, language &lt;chr&gt;, filming_locations &lt;chr&gt;,
## #   budget &lt;chr&gt;</code></pre>
<p>By default, the <code>arrange</code> function sorts in ascending rather than descending order. If we want to change this, we can use the <code>arrange</code> function in conjunction with the <code>desc</code> function.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="common-wrangling-ii.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="do">## using the arrange and desc functions to sort the review rating from highest to lowest</span></span>
<span id="cb119-2"><a href="common-wrangling-ii.html#cb119-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="common-wrangling-ii.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(review_rating)) <span class="sc">%&gt;%</span> </span>
<span id="cb119-4"><a href="common-wrangling-ii.html#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 12
##    title  genres release_date release_country movie_rating review_rating movie_run_time
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;           &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;         
##  1 Boneh… Horror 27-Oct-17    USA             &lt;NA&gt;                   9.8 &lt;NA&gt;          
##  2 The T… Actio… 13-Oct-17    USA             &lt;NA&gt;                   9.6 98 min        
##  3 The C… Comed… 26-Oct-17    Canada          &lt;NA&gt;                   9.6 97 min        
##  4 The S… Horror 1-Oct-17     UK              &lt;NA&gt;                   9.5 90 min        
##  5 Hotel… Actio… 29-Sep-17    UK              &lt;NA&gt;                   9.5 70 min        
##  6 Flesh… Horror 21-Oct-17    USA             &lt;NA&gt;                   9.5 77 min        
##  7 Bong … Horror 20-Oct-17    USA             &lt;NA&gt;                   9.4 &lt;NA&gt;          
##  8 The T… Horror 15-May-17    UK              &lt;NA&gt;                   9.4 72 min        
##  9 Take … Horror 1-Feb-15     USA             &lt;NA&gt;                   9.3 &lt;NA&gt;          
## 10 Johan… Actio… 1-Sep-16     USA             &lt;NA&gt;                   9.3 52 min        
## # ℹ 5 more variables: plot &lt;chr&gt;, cast &lt;chr&gt;, language &lt;chr&gt;, filming_locations &lt;chr&gt;,
## #   budget &lt;chr&gt;</code></pre>
</div>
<div id="the-filter-function-with-logicals" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> The <code>filter</code> function with logicals<a href="common-wrangling-ii.html#the-filter-function-with-logicals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As you saw last week, the <code>filter</code> function is great for subsetting your data based on a certain criteria. However, the <code>filter</code> function becomes much more powerful when used with logical operators. The three most common logical operators we use are the following:</p>
<ul>
<li><code>!</code> - the “not” logical operator</li>
<li><code>&amp;</code> - the “and” logical operator</li>
<li><code>|</code> - the “or” logical operator</li>
</ul>
<p>We already briefly specified the <code>!</code> logical operator in the previous section, so let’s focus on the <code>&amp;</code> and <code>|</code>. The <code>&amp;</code> operator becomes useful when we want to <code>filter</code> based on more than one true criteria. For example, suppose we want to filter out the movies that received a 9.0 review rating or higher AND was released in Canada. We would need to evaluate whether two criteria are satisfied: the statement “movies that received a 9.0 movie rating or higher”and the statement “released only in Canada”. If <strong>both</strong> of these statements are TRUE, then they get displayed. If not, they are filtered out.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="common-wrangling-ii.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="do">## filtering for only movies receiving a movie rating of 9.0 or higher </span></span>
<span id="cb121-2"><a href="common-wrangling-ii.html#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="do">## and in the country Canada</span></span>
<span id="cb121-3"><a href="common-wrangling-ii.html#cb121-3" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb121-4"><a href="common-wrangling-ii.html#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(review_rating <span class="sc">&gt;=</span> <span class="fl">9.0</span> <span class="sc">&amp;</span> release_country <span class="sc">==</span> <span class="st">&quot;Canada&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 12
##   title   genres release_date release_country movie_rating review_rating movie_run_time
##   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;           &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;         
## 1 Tales … Horror 18-Oct-17    Canada          &lt;NA&gt;                   9   80 min        
## 2 The Ca… Comed… 26-Oct-17    Canada          &lt;NA&gt;                   9.6 97 min        
## # ℹ 5 more variables: plot &lt;chr&gt;, cast &lt;chr&gt;, language &lt;chr&gt;, filming_locations &lt;chr&gt;,
## #   budget &lt;chr&gt;</code></pre>
<p>Notice that now we are looking at movies that have a 9.0 or higher movie rating, and were released in Canada. We can see that there are only 2 movies that match these criteria.</p>
<p>On the other hand, suppose we used the <code>|</code> logical operator instead. The <code>|</code> operator will evaluate whether “review rating is great than 9.0” is TRUE, or “release country is Canada” is TRUE. If <strong>either</strong> of these statements are TRUE or <strong>both</strong> of these are TRUE, then the data is displayed. If <strong>both</strong> of these are false, then they are filtered out. Observe:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="common-wrangling-ii.html#cb123-1" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="common-wrangling-ii.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(review_rating <span class="sc">&gt;=</span> <span class="fl">9.0</span> <span class="sc">|</span> release_country <span class="sc">==</span> <span class="st">&quot;Canada&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-3"><a href="common-wrangling-ii.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(review_rating, release_country,  <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 52 × 3
##    review_rating release_country     n
##            &lt;dbl&gt; &lt;chr&gt;           &lt;int&gt;
##  1          NA   Canada              7
##  2           9   USA                 5
##  3           4.4 Canada              4
##  4           4.5 Canada              4
##  5           2.4 Canada              3
##  6           3.3 Canada              3
##  7           4.9 Canada              3
##  8           9.1 USA                 3
##  9           3.4 Canada              2
## 10           4   Canada              2
## # ℹ 42 more rows</code></pre>
<p>Notice that we we have review ratings that are less than 9.0, and also countries that are not Canada. This is because only <strong>one</strong> of our statements need to be TRUE (although, as stated, <strong>both</strong> can be TRUE as well).</p>
<div id="exercise-13" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Exercise<a href="common-wrangling-ii.html#exercise-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Use the <code>filter</code> function to filter the horror movies that were released only in the USA or were “NOT RATED”. Find which of these movies had the highest review rating.</li>
</ul>
</div>
<div id="exercise-14" class="section level3 hasAnchor" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> Exercise<a href="common-wrangling-ii.html#exercise-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Count the number of PG-13 movies that are only in Japan and USA.</li>
</ul>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="common-wrangling-i.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="selected-solutions-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jules32/bookdown-tutorial/edit/master/guided_exercises_week_3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
