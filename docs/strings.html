<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Strings | Guided Exercises: Strings</title>
  <meta name="description" content="A mini bookdown tutorial book on how to make bookdown books." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Strings | Guided Exercises: Strings" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A mini bookdown tutorial book on how to make bookdown books." />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Strings | Guided Exercises: Strings" />
  
  <meta name="twitter:description" content="A mini bookdown tutorial book on how to make bookdown books." />
  

<meta name="author" content="Julie Lowndes" />


<meta name="date" content="2021-09-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="graphics-with-ggplot2.html"/>
<link rel="next" href="programming.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mini Bookdown Tutorial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> output: bookdown::gitbook</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#learn-all-about-bookdown"><i class="fa fa-check"></i><b>1.1</b> Learn all about Bookdown</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="the-rproject.html"><a href="the-rproject.html"><i class="fa fa-check"></i><b>2</b> The <code>Rproject</code></a></li>
<li class="chapter" data-level="3" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>3</b> Intro to R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#basic-summary-statistics"><i class="fa fa-check"></i><b>3.1</b> Basic summary statistics</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise"><i class="fa fa-check"></i><b>3.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="intro-to-r.html"><a href="intro-to-r.html#basic-histogram"><i class="fa fa-check"></i><b>3.2</b> Basic histogram</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-1"><i class="fa fa-check"></i><b>3.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="intro-to-r.html"><a href="intro-to-r.html#creating-vectors"><i class="fa fa-check"></i><b>3.3</b> Creating Vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-2"><i class="fa fa-check"></i><b>3.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro-to-r.html"><a href="intro-to-r.html#comparing-vectors"><i class="fa fa-check"></i><b>3.4</b> Comparing Vectors</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-3"><i class="fa fa-check"></i><b>3.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="intro-to-r.html"><a href="intro-to-r.html#creating-a-tibble"><i class="fa fa-check"></i><b>3.5</b> Creating a tibble</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="intro-to-r.html"><a href="intro-to-r.html#exercise-4"><i class="fa fa-check"></i><b>3.5.1</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html"><i class="fa fa-check"></i><b>4</b> Cleaning Data I</a>
<ul>
<li class="chapter" data-level="4.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-pipe"><i class="fa fa-check"></i><b>4.1</b> The Pipe</a></li>
<li class="chapter" data-level="4.2" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-clean_names-function"><i class="fa fa-check"></i><b>4.2</b> The <code>clean_names</code> function</a></li>
<li class="chapter" data-level="4.3" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-select-function"><i class="fa fa-check"></i><b>4.3</b> The <code>select</code> function</a></li>
<li class="chapter" data-level="4.4" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-filter-function"><i class="fa fa-check"></i><b>4.4</b> The <code>filter</code> function</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-5"><i class="fa fa-check"></i><b>4.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-distinct-function"><i class="fa fa-check"></i><b>4.5</b> The <code>distinct</code> function</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-6"><i class="fa fa-check"></i><b>4.5.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-mutate-function."><i class="fa fa-check"></i><b>4.6</b> The <code>mutate</code> function.</a></li>
<li class="chapter" data-level="4.7" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-summarize-function"><i class="fa fa-check"></i><b>4.7</b> The <code>summarize</code> function</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-7"><i class="fa fa-check"></i><b>4.7.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#the-group_by-and-summarize-functions"><i class="fa fa-check"></i><b>4.8</b> The <code>group_by</code> and <code>summarize</code> functions</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-8"><i class="fa fa-check"></i><b>4.8.1</b> Exercise</a></li>
<li class="chapter" data-level="4.8.2" data-path="cleaning-data-i.html"><a href="cleaning-data-i.html#exercise-9"><i class="fa fa-check"></i><b>4.8.2</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html"><i class="fa fa-check"></i><b>5</b> Data Cleaning II</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#the-count-function"><i class="fa fa-check"></i><b>5.1</b> The <code>count</code> function</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-10"><i class="fa fa-check"></i><b>5.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#using-the-is.na-function"><i class="fa fa-check"></i><b>5.2</b> Using the <code>is.na</code> function</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-11"><i class="fa fa-check"></i><b>5.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#the-arrange-function"><i class="fa fa-check"></i><b>5.3</b> The <code>arrange</code> function</a></li>
<li class="chapter" data-level="5.4" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#the-filter-function-with-logicals"><i class="fa fa-check"></i><b>5.4</b> The <code>filter</code> function with logicals</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-12"><i class="fa fa-check"></i><b>5.4.1</b> Exercise</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#exercise-13"><i class="fa fa-check"></i><b>5.4.2</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html"><i class="fa fa-check"></i><b>6</b> Graphics with ggplot2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>6.1</b> The grammar of graphics</a></li>
<li class="chapter" data-level="6.2" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#adding-options"><i class="fa fa-check"></i><b>6.2</b> Adding options</a></li>
<li class="chapter" data-level="6.3" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#adding-multiple-plots-together"><i class="fa fa-check"></i><b>6.3</b> Adding multiple plots together</a></li>
<li class="chapter" data-level="6.4" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#creating-legends"><i class="fa fa-check"></i><b>6.4</b> Creating legends</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#exercise-14"><i class="fa fa-check"></i><b>6.4.1</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>7</b> Strings</a>
<ul>
<li class="chapter" data-level="7.1" data-path="strings.html"><a href="strings.html#regular-expressions"><i class="fa fa-check"></i><b>7.1</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="strings.html"><a href="strings.html#exercise-1-1"><i class="fa fa-check"></i><b>7.1.1</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="strings.html"><a href="strings.html#regular-expressions-continued"><i class="fa fa-check"></i><b>7.2</b> Regular Expressions Continued</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="strings.html"><a href="strings.html#exercise-2-1"><i class="fa fa-check"></i><b>7.2.1</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="strings.html"><a href="strings.html#using-extract"><i class="fa fa-check"></i><b>7.3</b> Using <code>extract</code></a></li>
<li class="chapter" data-level="7.4" data-path="strings.html"><a href="strings.html#using-separate"><i class="fa fa-check"></i><b>7.4</b> Using <code>separate</code></a></li>
<li class="chapter" data-level="7.5" data-path="strings.html"><a href="strings.html#the-gsub-function"><i class="fa fa-check"></i><b>7.5</b> The <code>gsub</code> function</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="strings.html"><a href="strings.html#exercise-3-1"><i class="fa fa-check"></i><b>7.5.1</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="strings.html"><a href="strings.html#solutions"><i class="fa fa-check"></i><b>7.6</b> Solutions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>8</b> Programming</a>
<ul>
<li class="chapter" data-level="8.1" data-path="programming.html"><a href="programming.html#functions"><i class="fa fa-check"></i><b>8.1</b> Functions</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="programming.html"><a href="programming.html#exercise-15"><i class="fa fa-check"></i><b>8.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="programming.html"><a href="programming.html#for-loops"><i class="fa fa-check"></i><b>8.2</b> For-loops</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="programming.html"><a href="programming.html#exercise-16"><i class="fa fa-check"></i><b>8.2.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="programming.html"><a href="programming.html#if-else"><i class="fa fa-check"></i><b>8.3</b> If-else</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="programming.html"><a href="programming.html#exercise-17"><i class="fa fa-check"></i><b>8.3.1</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>9</b> Relational Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="relational-data.html"><a href="relational-data.html#finding-primary-keys"><i class="fa fa-check"></i><b>9.1</b> Finding Primary Keys</a></li>
<li class="chapter" data-level="9.2" data-path="relational-data.html"><a href="relational-data.html#finding-primary-keys-harder"><i class="fa fa-check"></i><b>9.2</b> Finding Primary Keys (harder)</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="relational-data.html"><a href="relational-data.html#exercise-18"><i class="fa fa-check"></i><b>9.2.1</b> Exercise</a></li>
<li class="chapter" data-level="9.2.2" data-path="relational-data.html"><a href="relational-data.html#exercise-19"><i class="fa fa-check"></i><b>9.2.2</b> Exercise</a></li>
<li class="chapter" data-level="9.2.3" data-path="relational-data.html"><a href="relational-data.html#exercise-20"><i class="fa fa-check"></i><b>9.2.3</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Guided Exercises: Strings</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="strings" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Strings</h1>
<p>For this Guided Exercise, we will once again be importing the horror movies data set from the TidyTuesday Github. This data set contains information from IMDB on various horror movies. Some important columns we will be focusing on this week:</p>
<ul>
<li><code>title</code>- the title of the movie</li>
<li><code>release_date</code>- movie release date in day-month-year format</li>
</ul>
<p>Let’s load in the data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="strings.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install the package if you do not have it</span></span>
<span id="cb1-2"><a href="strings.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.3     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
## ✓ readr   2.0.0     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="strings.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Load in the data</span></span>
<span id="cb5-2"><a href="strings.html#cb5-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-22/horror_movies.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 3328 Columns: 12</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (11): title, genres, release_date, release_country, movie_rating, movie_...
## dbl  (1): review_rating</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Our goal this week to get comfortable with three things:</p>
<ol style="list-style-type: decimal">
<li>Simple pattern matching with regular expressions</li>
<li>Using the <code>extract</code> function</li>
<li>Using the <code>separate</code> function</li>
</ol>
<p>Using all of these three things together will allow you to do powerful data wrangling techniques that are valued greatly in the workforce.</p>
<div id="regular-expressions" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Regular Expressions</h2>
<p>Regular expressions are a fantastic tool that will allow you to match patterns in strings. To demonstrate their value, we will start off by making a vector of strings, and use <code>str_view</code> to show how we can match patterns using regular expressions.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="strings.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a vector of strings I would like to analyze</span></span>
<span id="cb9-2"><a href="strings.html#cb9-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">&quot;Econ 145&quot;</span>, <span class="st">&quot;Hello!&quot;</span>, <span class="st">&quot;Best CLASS&quot;</span>)</span></code></pre></div>
<p>Let’s see if we can match some basic patterns. Suppose I want to find the “o” in each component of the vector. I can do the following:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="strings.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## finding all of the o&#39;s in tthe vector x using str_view</span></span>
<span id="cb10-2"><a href="strings.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> x, <span class="at">pattern =</span> <span class="st">&quot;o&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-d6ba611d3c0d9f72c085" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-d6ba611d3c0d9f72c085">{"x":{"html":"<ul>\n  <li>Ec<span class='match'>o<\/span>n 145<\/li>\n  <li>Hell<span class='match'>o<\/span>!<\/li>\n  <li>Best CLASS<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Notice that we are matching (see the highlighted text) on the pattern “o” in every element of the vector. Note that there was no “o” to match on in the last element, “Best CLASS,” so nothing was highlighted.</p>
<p>We can take this even further by matching on a selection of numbers. Suppose we want to match the numbers “145.” We can simply type in “145” into our pattern match.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="strings.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## matching on the pattern 145</span></span>
<span id="cb11-2"><a href="strings.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> x, <span class="at">pattern =</span> <span class="st">&quot;145&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-ed124fb0dae147cd2061" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-ed124fb0dae147cd2061">{"x":{"html":"<ul>\n  <li>Econ <span class='match'>145<\/span><\/li>\n  <li>Hello!<\/li>\n  <li>Best CLASS<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>However, these are all trivial examples. Regular expressions allow us to match on <em>patterns</em>, not just simple expressions. For example, suppose we have a vector which has multiple names of courses in the economics department:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="strings.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a new vector with three string elements </span></span>
<span id="cb12-2"><a href="strings.html#cb12-2" aria-hidden="true" tabindex="-1"></a>econ_classes <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">&quot;Econ 145&quot;</span>, <span class="st">&quot;Econ 10A&quot;</span>, <span class="st">&quot;Econ 140A&quot;</span>)</span></code></pre></div>
<p>Now suppose I want to pattern match only the course numbers. I can do this by using a regular expression.</p>
<ul>
<li><code>\d</code>: the regular expression pattern that matches any digit</li>
</ul>
<p>Let’s see this in action.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="strings.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## matching incorrectly on any digit</span></span>
<span id="cb13-2"><a href="strings.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> econ_classes, <span class="at">pattern =</span> <span class="st">&quot;\d&quot;</span>)</span></code></pre></div>
<p>The first thing you should notice when you click enter is that an error message occurs: Error: ’ is an unrecognized escape in character string starting "". We get this error message because <code>\</code> is an escape character in the R programming language. Therefore, we need to escape the escape character by using <code>\\d</code> to match on a number. This can often be annoyingly difficult to remember, but the the error message should guide you to remember this detail.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="strings.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## matching correctly on any digit</span></span>
<span id="cb14-2"><a href="strings.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> econ_classes, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-7cfebe99c3793274f2dc" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-7cfebe99c3793274f2dc">{"x":{"html":"<ul>\n  <li>Econ <span class='match'>1<\/span>45<\/li>\n  <li>Econ <span class='match'>1<\/span>0A<\/li>\n  <li>Econ <span class='match'>1<\/span>40A<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>We managed to match on a number in every single element of the vector without actually specifying we wanted a “1.” This is absolutely incredible.</p>
<p>It is important to note that <code>\\d</code> will only match on one number, and by default, the first number it comes across in the string going from left to right. If we want to match on more numbers, we need to add in more <code>\\d</code>s. For instance, if we wanted to match on 2 digits, our pattern argument would be equal to <code>\\d\\d</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="strings.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## matching on any two digits in each component</span></span>
<span id="cb15-2"><a href="strings.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> econ_classes, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-aedcc65b7897f721f712" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-aedcc65b7897f721f712">{"x":{"html":"<ul>\n  <li>Econ <span class='match'>14<\/span>5<\/li>\n  <li>Econ <span class='match'>10<\/span>A<\/li>\n  <li>Econ <span class='match'>14<\/span>0A<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Let’s try to match on all of the course numbers. Notice that some course numbers have 2 digits, while others have 3. Let’s see what happens when we try to match on 3 digits.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="strings.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## matching on exactly three digits in each component</span></span>
<span id="cb16-2"><a href="strings.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> econ_classes, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-d093f3e23ab0c6b71e17" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-d093f3e23ab0c6b71e17">{"x":{"html":"<ul>\n  <li>Econ <span class='match'>145<\/span><\/li>\n  <li>Econ 10A<\/li>\n  <li>Econ <span class='match'>140<\/span>A<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>We can see that we matched on <em>exactly</em> 3 digits, and failed to match on the element that only contained 2 digits. However, as you may have expected, we have ways to work around this using what we call <em>repetition patterns</em>. You can specify the number of matches you would like to make using the following:</p>
<ul>
<li><code>{n}</code>: matches exactly n amount of your pattern</li>
<li><code>{n,}</code>: matches n or more</li>
<li><code>{,m}</code>: matches at most m</li>
<li><code>{n,m}</code>: matches between n and m</li>
</ul>
<p>Hence, we can match on all the course digits by specifying how many times we would like to match the <code>\d</code> patter.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="strings.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">##matches any digit 2 or more times</span></span>
<span id="cb17-2"><a href="strings.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> econ_classes, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d{2,}&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-5ee432d67b3f6e3f6ca1" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-5ee432d67b3f6e3f6ca1">{"x":{"html":"<ul>\n  <li>Econ <span class='match'>145<\/span><\/li>\n  <li>Econ <span class='match'>10<\/span>A<\/li>\n  <li>Econ <span class='match'>140<\/span>A<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Success! We managed to match the <code>\d</code> pattern two or more times and have matched on the course digits. The way we would read this pattern is left to right: “match on any digit, and do this two times or more.”</p>
<div id="exercise-1-1" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Exercise 1</h3>
<ul>
<li>Find another way to match on the digits of the <code>econ_classes</code> vector.</li>
</ul>
</div>
</div>
<div id="regular-expressions-continued" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Regular Expressions Continued</h2>
<p>Let’s try matching on other types of expressions.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="strings.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a new vector for us to match patterns on</span></span>
<span id="cb18-2"><a href="strings.html#cb18-2" aria-hidden="true" tabindex="-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;aaabbbccc&quot;</span>, <span class="st">&quot;dddAAAccc&quot;</span>, <span class="st">&quot;eib iii&quot;</span>)</span></code></pre></div>
<p>Here are a couple more useful patterns:</p>
<ul>
<li><code>[abc]</code>: matches exactly one time on a, b, or c. If multiple appear, it matches on the one that comes first.</li>
<li><code>[^abc]</code>: matches exactly one time on anything except a, b, or c. </li>
<li><code>\s</code>: matches any whitespace (e.g. space, tab, newline).</li>
</ul>
<p>We will match on the beginning letter of each of these elements in our vector.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="strings.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">##matching on the letters a d or e</span></span>
<span id="cb19-2"><a href="strings.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="at">string =</span> vector, <span class="at">pattern =</span> <span class="st">&quot;[ade]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-d1f907f633f85aca1641" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-d1f907f633f85aca1641">{"x":{"html":"<ul>\n  <li><span class='match'>a<\/span>aabbbccc<\/li>\n  <li><span class='match'>d<\/span>ddAAAccc<\/li>\n  <li><span class='match'>e<\/span>ib iii<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div id="exercise-2-1" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Exercise 2</h3>
<ul>
<li>Using the <code>vector</code> and <code>str_view</code>, match on the capital A and the whitespace.</li>
</ul>
</div>
</div>
<div id="using-extract" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Using <code>extract</code></h2>
<p>We will now focus on matching regular expressions within the context of tidying data. Let’s specifically focus on the <code>title</code> and <code>release_date</code> columns.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="strings.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## selecting only the title and release date columns in the horror movies data set</span></span>
<span id="cb20-2"><a href="strings.html#cb20-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="ot">&lt;-</span> horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="strings.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(title, release_date)</span>
<span id="cb20-4"><a href="strings.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="do">## showing the head of the data set</span></span>
<span id="cb20-5"><a href="strings.html#cb20-5" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   title                               release_date
##   &lt;chr&gt;                               &lt;chr&gt;       
## 1 Gut (2012)                          26-Oct-12   
## 2 The Haunting of Mia Moss (2017)     13-Jan-17   
## 3 Sleepwalking (2017)                 21-Oct-17   
## 4 Treasure Chest of Horrors II (2013) 23-Apr-13   
## 5 Infidus (2015)                      10-Apr-15   
## 6 In Extremis (2017)                  2017</code></pre>
<p>Notice that it looks like each movie title is followed by a whitespace, and then a parenthesis with the movie release year inside of it. For the purposes of explaining <code>extract</code>, we will focus on extracting the dates from the <code>title</code> column.</p>
<p>The <code>extract</code> function extracts information you want from a column and puts it into a column of your choice. The specific arguments it has are col, into, and regex. These correspond to the column you want to extract an expression from, the column name you are going to send your extracted expression into, and the regular expression pattern you want to extract respectively.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="strings.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## extracting the year from the </span></span>
<span id="cb22-2"><a href="strings.html#cb22-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="strings.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="st">&quot;year&quot;</span>, <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d)&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3,328 × 2
##    year  release_date
##    &lt;chr&gt; &lt;chr&gt;       
##  1 2012  26-Oct-12   
##  2 2017  13-Jan-17   
##  3 2017  21-Oct-17   
##  4 2013  23-Apr-13   
##  5 2015  10-Apr-15   
##  6 2017  2017        
##  7 2013  3-Jun-14    
##  8 2015  25-Apr-15   
##  9 2015  28-May-17   
## 10 2016  7-Oct-16    
## # … with 3,318 more rows</code></pre>
<p>It is important to note that we <strong>need to put parenthesis</strong> around the pattern that we want to match in our <code>regex</code> argument for the match to work. Observe what happens when we do not:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="strings.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## code does not work because no parenthesis around the regex expression</span></span>
<span id="cb24-2"><a href="strings.html#cb24-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="strings.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="st">&quot;year&quot;</span>, <span class="at">regex =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d&quot;</span>)</span></code></pre></div>
<p>This is because the parenthesis define a group of patterns that you want to match. Everything inside your parenthesis is a group. For the purposes of this class, we will only be extracting 1 group, as extracting more than one group gets very complicated.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="strings.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">## the correct code: works because we put parenthesis around the regex expression</span></span>
<span id="cb25-2"><a href="strings.html#cb25-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="strings.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="st">&quot;year&quot;</span>, <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d)&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3,328 × 2
##    year  release_date
##    &lt;chr&gt; &lt;chr&gt;       
##  1 2012  26-Oct-12   
##  2 2017  13-Jan-17   
##  3 2017  21-Oct-17   
##  4 2013  23-Apr-13   
##  5 2015  10-Apr-15   
##  6 2017  2017        
##  7 2013  3-Jun-14    
##  8 2015  25-Apr-15   
##  9 2015  28-May-17   
## 10 2016  7-Oct-16    
## # … with 3,318 more rows</code></pre>
<p>Notice when we ran the previous correct code, our <code>title</code> column disappeared. This is because by default, the extract function deletes the original column. To avoid this, we can set the <code>remove</code> argument to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="strings.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## the correct code: works because we put parenthesis around the regex expression</span></span>
<span id="cb27-2"><a href="strings.html#cb27-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="strings.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="st">&quot;year&quot;</span>, <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d)&quot;</span>, <span class="at">remove =</span> F)</span></code></pre></div>
<pre><code>## # A tibble: 3,328 × 3
##    title                               year  release_date
##    &lt;chr&gt;                               &lt;chr&gt; &lt;chr&gt;       
##  1 Gut (2012)                          2012  26-Oct-12   
##  2 The Haunting of Mia Moss (2017)     2017  13-Jan-17   
##  3 Sleepwalking (2017)                 2017  21-Oct-17   
##  4 Treasure Chest of Horrors II (2013) 2013  23-Apr-13   
##  5 Infidus (2015)                      2015  10-Apr-15   
##  6 In Extremis (2017)                  2017  2017        
##  7 Ghostlight (2013)                   2013  3-Jun-14    
##  8 Parasyte: Part 2 (2015)             2015  25-Apr-15   
##  9 Stranger in the House (2015)        2015  28-May-17   
## 10 Tutak Tutak Tutiya (2016)           2016  7-Oct-16    
## # … with 3,318 more rows</code></pre>
</div>
<div id="using-separate" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Using <code>separate</code></h2>
<p>The <code>separate</code> function will split a column into multiple columns based on a regular expression. You can think of separate as a way to split with a more complicated delimiter (a delimiter is a character that separates values). For starters, we will separate once again look at the <code>title</code> column in the horror movies data. Recall that the <code>title</code> column is organized as the movie title, followed by a blank space and then the year of release in parenthesis. We will take advantage of this unique organization and separate our <code>title</code> column into two columns: <code>title</code> which will have the title of the movie, and <code>year</code> which will have the release year. While this will take multiple steps to get into a perfectly cleaned data set, we can utilize our piping procedures to make it relatively straightforward.</p>
<p>First, let’s separate the column based on the first parenthesis that we see.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="strings.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## separating on the first parenthesis in the title column</span></span>
<span id="cb29-2"><a href="strings.html#cb29-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="strings.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;title&quot;</span>,<span class="st">&quot;year&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span>) </span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 7 rows [691, 928,
## 1289, 2086, 2130, 2545, 3262].</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [932].</code></pre>
<pre><code>## # A tibble: 3,328 × 3
##    title                           year  release_date
##    &lt;chr&gt;                           &lt;chr&gt; &lt;chr&gt;       
##  1 &quot;Gut &quot;                          2012) 26-Oct-12   
##  2 &quot;The Haunting of Mia Moss &quot;     2017) 13-Jan-17   
##  3 &quot;Sleepwalking &quot;                 2017) 21-Oct-17   
##  4 &quot;Treasure Chest of Horrors II &quot; 2013) 23-Apr-13   
##  5 &quot;Infidus &quot;                      2015) 10-Apr-15   
##  6 &quot;In Extremis &quot;                  2017) 2017        
##  7 &quot;Ghostlight &quot;                   2013) 3-Jun-14    
##  8 &quot;Parasyte: Part 2 &quot;             2015) 25-Apr-15   
##  9 &quot;Stranger in the House &quot;        2015) 28-May-17   
## 10 &quot;Tutak Tutak Tutiya &quot;           2016) 7-Oct-16    
## # … with 3,318 more rows</code></pre>
<p>Notice how we managed to separate the two columns, but there are now more problems we need to deal with:</p>
<ol style="list-style-type: decimal">
<li>What do the warning messages mean?</li>
<li>We need to get rid of the extra parenthesis in the <code>year</code> column.</li>
<li>We need (well, we don’t NEED) to get rid of the blank space at the end of the <code>title</code> column.</li>
</ol>
<p>First and foremost, we will take a second to review what a warning message is.</p>
<p><strong>Warning message:</strong> These are messages that tell you that your R code was able to execute, but in the process, R decided to do something that you did not tell it to. It is <strong>extremely</strong> important that you Google warning messages, as your data could be manipulated by R in ways you really did not want. Let’s look at our two warning messages in depth:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="strings.html#cb33-1" aria-hidden="true" tabindex="-1"></a>Warning messages<span class="sc">:</span></span>
<span id="cb33-2"><a href="strings.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span> Expected <span class="dv">2</span> pieces. Additional pieces discarded <span class="cf">in</span> <span class="dv">7</span> rows [<span class="dv">691</span>, <span class="dv">928</span>, <span class="dv">1289</span>, <span class="dv">2086</span>, <span class="dv">2130</span>, <span class="dv">2545</span>, <span class="dv">3262</span>]. </span>
<span id="cb33-3"><a href="strings.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">:</span> Expected <span class="dv">2</span> pieces. Missing pieces filled with <span class="st">`</span><span class="at">NA</span><span class="st">`</span> <span class="cf">in</span> <span class="dv">1</span> rows [<span class="dv">932</span>]</span></code></pre></div>
<p>The first warning message is telling us that R expected 2 pieces, and then discarded additional pieces in 7 rows. While this does not make much sense at first sight, it gives us the rows which it performed this process. The best practice is to investigate these rows to get a better idea of what is happening.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="strings.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">## investigating a couple of the rows that caused the warning message</span></span>
<span id="cb34-2"><a href="strings.html#cb34-2" aria-hidden="true" tabindex="-1"></a>horror_movies<span class="sc">$</span>title[<span class="dv">691</span>]</span></code></pre></div>
<pre><code>## [1] &quot;ErOddity(s) 2 (2015)&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="strings.html#cb36-1" aria-hidden="true" tabindex="-1"></a>horror_movies<span class="sc">$</span>title[<span class="dv">928</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Truth or Double Dare (TODD) (2017)&quot;</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="strings.html#cb38-1" aria-hidden="true" tabindex="-1"></a>horror_movies<span class="sc">$</span>title[<span class="dv">1289</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Hi-8 (Horror Independent 8) (2013)&quot;</code></pre>
<p>By now you should see a problem: each of these warning rows have a parenthesis in the title name! This means that R is separating based on our parenthesis, but since there are multiple parenthesis, it is separating multiple times. Therefore, it is discarding the extra separated piece in each row. Generally, you want to make sure R is not throwing away any important information. You could check this yourself by saving this as a new tibble, and investigating the rows. Hence, we will create a new tibble for demonstration purposes.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="strings.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">## performing the same task but saving it in a new tibble</span></span>
<span id="cb40-2"><a href="strings.html#cb40-2" aria-hidden="true" tabindex="-1"></a>investigate_horror_movies <span class="ot">&lt;-</span> horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="strings.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;title&quot;</span>,<span class="st">&quot;year&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span>) </span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 7 rows [691, 928,
## 1289, 2086, 2130, 2545, 3262].</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [932].</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="strings.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="do">## investigating the 691th row of the saved tibble</span></span>
<span id="cb43-2"><a href="strings.html#cb43-2" aria-hidden="true" tabindex="-1"></a>investigate_horror_movies[<span class="dv">691</span>,]</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   title    year    release_date
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;       
## 1 ErOddity &quot;s) 2 &quot; 24-Nov-15</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="strings.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">## investigating the 928th row of the saved tibble </span></span>
<span id="cb45-2"><a href="strings.html#cb45-2" aria-hidden="true" tabindex="-1"></a>investigate_horror_movies[<span class="dv">928</span>,]</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   title                   year     release_date
##   &lt;chr&gt;                   &lt;chr&gt;    &lt;chr&gt;       
## 1 &quot;Truth or Double Dare &quot; &quot;TODD) &quot; 30-Oct-17</code></pre>
<p>Clearly, this isn’t giving us our desired result for the 7 rows that were causing this issue. While we will ignore this for the purpose of this exercise, you want to be very aware of what is happening to your data.</p>
<p>Next, let’s investigate the second warning message: Expected 2 pieces. Missing pieces filled with <code>NA</code> in 1 rows [932]. It seems as though R filled a missing piece of information in our row 932. Let’s take a closer look:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="strings.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="do">## investigating what happened in row 932</span></span>
<span id="cb47-2"><a href="strings.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="do">## checking the title column first in our original data</span></span>
<span id="cb47-3"><a href="strings.html#cb47-3" aria-hidden="true" tabindex="-1"></a>horror_movies<span class="sc">$</span>title[<span class="dv">932</span>]</span></code></pre></div>
<pre><code>## [1] &quot;American Exorcist&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="strings.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="do">## look what happened to our data in row 932</span></span>
<span id="cb49-2"><a href="strings.html#cb49-2" aria-hidden="true" tabindex="-1"></a>investigate_horror_movies[<span class="dv">932</span>,]</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   title             year  release_date
##   &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;       
## 1 American Exorcist &lt;NA&gt;  2017</code></pre>
<p>Clearly we missed something: not all the movies have the same format of MOVIE TITLE (YEAR). It appears that the movie “American Exorcist” in row 932 did not have a date attached to it. Therefore, when we tried to separate by parenthesis, R was unable to perform this task and replaced the value with NA. In our case, this wouldn’t have affected our analysis since there was no date attached to it, but we would want to find another way to extract the date from another column. However, as before, we will ignore this warning message since fixing it will take a lot of time in effort. It is important to realize that <strong>you must read and investigate warning messages</strong> since R constantly performs operations on your data that may not be exactly what you intend.</p>
<p>Moving on, let’s start solving our second task: getting rid of the extra parenthesis in the <code>year</code> column. Recall, we can actually use the <code>extract</code> function here to remove the final parenthesis. We can do this all in one step using a pipe.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="strings.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">## separating on the first parenthesis in the title column and then extracting the four numbers for date</span></span>
<span id="cb51-2"><a href="strings.html#cb51-2" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="strings.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;title&quot;</span>,<span class="st">&quot;year&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="strings.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract</span>(<span class="at">col =</span> year, <span class="at">into =</span> <span class="st">&quot;year&quot;</span>, <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d)&quot;</span>) </span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 7 rows [691, 928,
## 1289, 2086, 2130, 2545, 3262].</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [932].</code></pre>
<pre><code>## # A tibble: 3,328 × 3
##    title                           year  release_date
##    &lt;chr&gt;                           &lt;chr&gt; &lt;chr&gt;       
##  1 &quot;Gut &quot;                          2012  26-Oct-12   
##  2 &quot;The Haunting of Mia Moss &quot;     2017  13-Jan-17   
##  3 &quot;Sleepwalking &quot;                 2017  21-Oct-17   
##  4 &quot;Treasure Chest of Horrors II &quot; 2013  23-Apr-13   
##  5 &quot;Infidus &quot;                      2015  10-Apr-15   
##  6 &quot;In Extremis &quot;                  2017  2017        
##  7 &quot;Ghostlight &quot;                   2013  3-Jun-14    
##  8 &quot;Parasyte: Part 2 &quot;             2015  25-Apr-15   
##  9 &quot;Stranger in the House &quot;        2015  28-May-17   
## 10 &quot;Tutak Tutak Tutiya &quot;           2016  7-Oct-16    
## # … with 3,318 more rows</code></pre>
<p>Finally, let’s satisfy (2) and get rid of the whitespace that is at the end of our <code>title</code> column. Luckily, the <code>stringr</code> package has a pre-programmed function called <code>stringr::str_trim</code> that will trim the whitespace off the end of our column. Now we can perform the entire cleaning of the <code>title</code> column in one piping procedure:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="strings.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="do">## separating on the first parenthesis in the title column and then extracting the four numbers for date</span></span>
<span id="cb55-2"><a href="strings.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="do">## and then removing the whitespace that is left over</span></span>
<span id="cb55-3"><a href="strings.html#cb55-3" aria-hidden="true" tabindex="-1"></a>horror_movies <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="strings.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> title, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;title&quot;</span>,<span class="st">&quot;year&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a href="strings.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract</span>(<span class="at">col =</span> year, <span class="at">into =</span> <span class="st">&quot;year&quot;</span>, <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-6"><a href="strings.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">str_trim</span>(title))</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 7 rows [691, 928,
## 1289, 2086, 2130, 2545, 3262].</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [932].</code></pre>
<pre><code>## # A tibble: 3,328 × 3
##    title                        year  release_date
##    &lt;chr&gt;                        &lt;chr&gt; &lt;chr&gt;       
##  1 Gut                          2012  26-Oct-12   
##  2 The Haunting of Mia Moss     2017  13-Jan-17   
##  3 Sleepwalking                 2017  21-Oct-17   
##  4 Treasure Chest of Horrors II 2013  23-Apr-13   
##  5 Infidus                      2015  10-Apr-15   
##  6 In Extremis                  2017  2017        
##  7 Ghostlight                   2013  3-Jun-14    
##  8 Parasyte: Part 2             2015  25-Apr-15   
##  9 Stranger in the House        2015  28-May-17   
## 10 Tutak Tutak Tutiya           2016  7-Oct-16    
## # … with 3,318 more rows</code></pre>
</div>
<div id="the-gsub-function" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> The <code>gsub</code> function</h2>
<p>Many times, we want to simply replace simple patterns in columns of data sets. The <code>stringr::str_replace</code> function is a simple way to take expressions within variables and substitute them with a different result. Let’s create a vector of values to demonstrate.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="strings.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a vector to demonstrate gsub</span></span>
<span id="cb59-2"><a href="strings.html#cb59-2" aria-hidden="true" tabindex="-1"></a>money <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;$100&quot;</span>, <span class="st">&quot;$150&quot;</span>, <span class="st">&quot;$200&quot;</span>)</span></code></pre></div>
<p>A common use of <code>gsub</code> is to get rid of dollar signs in columns that have monetary values. Omitting the dollar sign is essential if you want to perform any type of summary statistic.</p>
<p>The three arguments in the <code>stringr::str_replace</code> function that we are concerned with are the <code>pattern</code>, <code>replacement</code>, and <code>string</code> arguments. The <code>pattern</code> argument is the regular expression we want to find in our vector, and the <code>replacement</code> argument is what we would like to replace the regular expression with. The <code>string</code> argument is the vector you want to perform the <code>stringr::str_replace</code> function on.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="strings.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="do">## the gsub function attempting (but unsuccessfully) trying to replace the $ with nothing</span></span>
<span id="cb60-2"><a href="strings.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(money, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">$&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100&quot; &quot;150&quot; &quot;200&quot;</code></pre>
<p>Notice that we had to once again, use the escape characters since the dollar sign is a special characer.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="strings.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="do">## successfully replacing the $ with nothing</span></span>
<span id="cb62-2"><a href="strings.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(money, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">$&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100&quot; &quot;150&quot; &quot;200&quot;</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="strings.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="do">## saving this new result</span></span>
<span id="cb64-2"><a href="strings.html#cb64-2" aria-hidden="true" tabindex="-1"></a>money <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(money, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">$&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<div id="exercise-3-1" class="section level3" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Exercise 3</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="strings.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="do">## use the following vector for the exercise</span></span>
<span id="cb65-2"><a href="strings.html#cb65-2" aria-hidden="true" tabindex="-1"></a>exercise <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;100%&quot;</span>, <span class="st">&quot;94%&quot;</span>, <span class="st">&quot;87%&quot;</span>)</span></code></pre></div>
<ul>
<li>Using <code>stringr::str_replace</code>, replace the percent signs in the <code>exercise</code> vector with nothing. Then, convert the <code>exercise</code> vector to a double using <code>as.double</code>, and find the variance.</li>
</ul>
</div>
</div>
<div id="solutions" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Solutions</h2>
<ul>
<li>Exercise 1: <code>str_view(string = econ_classes, pattern = "\\d{1,3}")</code></li>
<li>Exercise 2: <code>str_view(string = vector, pattern = "[A\\s]")</code></li>
<li>Exercise 3: <code>var_exercise &lt;- var(as.double(gsub("\\%", "", exercise)))</code>.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="graphics-with-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jules32/bookdown-tutorial/edit/master/strings.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
